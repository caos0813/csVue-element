webpackJsonp([1],{"1imW":function(e,t){},"5iEN":function(e,t){},HR0B:function(e,t){},MXkr:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};a.d(r,"breadData",function(){return B});a("tvR6");var n=a("qBF2"),s=a.n(n),o=a("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},l=a("VU/8")({name:"App"},i,!1,null,null,null).exports,u=a("/ocq");var p={propertyGroup:"propertyGroup",findByPropertyGroupIdAndName:"propertyId/search/findByPropertyGroupIdAndName",propertySearch:"property/search/",property:"property",propertyId:"propertyId",authentication:"auth",import:"http://39.104.124.195:9080/import"};function c(e){return("00"+e).substr(e.length)}var m=a("lbHh"),d=a.n(m),f={data:function(){return{a:null,params:{},rules:{userName:[{required:!0,message:"请输入账号",trigger:"change"}],passWord:[{required:!0,message:"请输入密码",trigger:"change"},{min:6,message:"密码长度不正确",trigger:"change"}]}}},methods:{submit:function(){var e=this;this.$refs.form.validate(function(t){t?(console.log(e.params),e.$fly.post(p.authentication,e.params).then(function(t){d.a.set("user",{userName:e.params.userName,token:t.token},{expires:7}),e.$message({message:"登录成功!",type:"success"}),e.$router.replace({name:"home"})}).catch(function(){e.$message({message:"登录失败",type:"error"})})):console.log("error submit!!")})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-wrap"},[a("div",{staticClass:"form-wrap"},[a("el-form",{ref:"form",attrs:{model:e.params,rules:e.rules}},[a("el-form-item",{attrs:{prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入账号",name:"userName"},model:{value:e.params.userName,callback:function(t){e.$set(e.params,"userName",t)},expression:"params.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"passWord"}},[a("el-input",{attrs:{type:"passWord",placeholder:"请输入密码",name:"passWord"},model:{value:e.params.passWord,callback:function(t){e.$set(e.params,"passWord",t)},expression:"params.passWord"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-center"},[a("el-button",{staticClass:"btn",attrs:{type:"primary","native-type":"submit",round:""},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("登录")])],1)],1)],1)])},staticRenderFns:[]};var v=a("VU/8")(f,h,!1,function(e){a("suYJ")},"data-v-1cffa0b5",null).exports,g={data:function(){return{isCollapse:!1,title:"",listData:[]}},computed:{userName:function(){return d.a.get("user")?JSON.parse(d.a.get("user")).userName:""},activeIndex:function(){var e=this.$route.params.id;return"number"==typeof e&&(e=e.toString()),e},breadData:function(){return this.$store.state.breadData}},methods:{signOut:function(){d.a.remove("user"),this.$router.replace({name:"login"})}},created:function(){var e=this;this.$fly.get(p.propertyGroup,{page:0,size:100}).then(function(t){e.listData=t._embedded.propertyGroup,"home"===e.$route.name&&e.$router.replace({name:"home-list",params:{id:e.listData[0].pkId},query:{name:e.listData[0].name}})})}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"container"},[a("el-header",{staticClass:"el-header"},[a("div",{staticClass:"logo"},[e._v("JunYang OMS")]),e._v(" "),a("div",{staticClass:"bar"},[a("i",{staticClass:"el-icon-menu menu"}),e._v(" "),a("el-dropdown",[a("span",{staticClass:"el-dropdown-link"},[e._v("\n          "+e._s(e.userName)+"\n          "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown","split-button":""},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.signOut(t)}}},[e._v("退出登录")])],1)],1)],1)]),e._v(" "),a("el-container",{staticClass:"main-container"},[a("el-aside",{staticClass:"aside"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.activeIndex,collapse:e.isCollapse,router:""}},e._l(e.listData,function(t,r){return a("el-menu-item",{key:r,attrs:{index:t.pkId.toString(),route:{name:"home-list",params:{id:t.pkId},query:{name:t.name}}}},[a("i",{staticClass:"el-icon-star-on"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])}))],1),e._v(" "),a("el-main",{staticClass:"main"},[a("transition",{attrs:{name:"el-fade-in"}},[a("keep-alive",[a("router-view")],1)],1)],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(g,y,!1,function(e){a("nlig")},"data-v-4421474c",null).exports,_={data:function(){return{loading:!1,params:{page:0,size:10,name:""},uploadUrl:p.import,uploadData:{propertyGroupId:this.$route.params.id},pageInfo:{},tableData:[]}},computed:{breadData:function(){return this.$store.state.breadData}},methods:{uploadSuccess:function(e){console.log(e),this.refresh(),this.$message({type:"success",duration:2e3,message:"上传成功!"})},uploadError:function(e){console.log(e),this.$message({type:"error",duration:2e3,message:"上传失败!"})},toState:function(e,t){"edit"===t&&this.$router.push({name:"home-edit",params:{id:e.pkId,type:this.$route.params.id},query:{name:e.name}})},del:function(e,t){var a=this;console.log(t),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$fly.delete(p.propertyId+"/"+e.pkId).then(function(){a.tableData.splice(t,1),a.$message({type:"success",duration:2e3,message:"删除成功!"})})}).catch(function(){})},search:function(){this.refresh()},changePage:function(e){this.params.page=e-1,this.getData(this.params)},dateFormat:function(e,t){var a=e[t.property];return"number"==typeof a&&(a=new Date(a)),function(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var r in a)if(new RegExp("("+r+")").test(t)){var n=a[r]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?n:c(n))}return t}(a,"yyyy-MM-dd hh:mm:ss")},getData:function(e){var t=this;this.lodash.isEmpty(e.name)&&(console.log(1),delete e.name),this.loading=!0,e.propertyGroupId=this.$route.params.id,this.$fly.get(p.findByPropertyGroupIdAndName,e).then(function(e){var a=e.page,r=e._embedded;t.tableData=r.propertyId,t.pageInfo=a,t.pageInfo.currentPage=a.number+1,t.loading=!1})},setBreadData:function(){var e=this.$route,t=[{name:e.name,params:e.params,query:e.query}];this.$store.commit("SET_BREAD_DATA",t)},refresh:function(){this.params.page=0,this.getData(this.params)}},watch:{$route:function(e,t){"home-list"===e.name&&("home-list"!==t.name&&e.params.id===t.params.type?(this.getData(this.params),this.setBreadData()):(this.refresh(),this.setBreadData()))}},created:function(){console.log(this.$fly.config.baseURL),this.getData(this.params),this.setBreadData()}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"tools-wrap"},[a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},e._l(e.breadData,function(t,r){return a("el-breadcrumb-item",{key:r,attrs:{to:t}},[e._v(e._s(t.query.name))])}))],1),e._v(" "),a("form",{attrs:{name:"form"},on:{submit:function(t){return t.preventDefault(),e.search(t)}}},[a("el-input",{attrs:{placeholder:"请输入搜索关键字",type:"search",size:"small "},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name "}}),e._v(" "),a("el-button",{attrs:{type:"primary ","native-type":"submit",size:"small "}},[e._v("\n        搜索")])],1)]),e._v(" "),a("div",{staticClass:"wrap "},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading "}],attrs:{border:"",stripe:"","element-loading-text":"拼命加载中 ",data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"名称 ",align:"center "}}),e._v(" "),a("el-table-column",{attrs:{prop:"lastModifiedDate",label:"更新时间/日期 ",width:"200 ",align:"center ",formatter:e.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"createDate",label:"创建时间/日期 ",width:"200 ",align:"center ",formatter:e.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200 ",align:"center "},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary ",size:"mini "},on:{click:function(a){e.toState(t.row,"edit")}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger ",size:"mini "},on:{click:function(a){e.del(t.row,t.$index)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"page-wrap text-center padding "},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next ","current-page":e.pageInfo.currentPage,"page-count":e.pageInfo.totalPages,"page-size":e.pageInfo.size},on:{"current-change":e.changePage}})],1)],1)])},staticRenderFns:[]};var $=a("VU/8")(_,D,!1,function(e){a("1imW")},"data-v-e085f642",null).exports,k=a("BO1k"),x=a.n(k),w=a("mvHQ"),N=a.n(w),E={data:function(){return{labelPosition:"right",propertyValues:[],infoData:{}}},methods:{delRow:function(e,t){this.propertyValues[e].value.splice(t,1),this.propertyValues=this.initData(this.propertyValues)},addRow:function(e){this.propertyValues[e].value.push({key:"",value:[]}),this.propertyValues=this.initData(this.propertyValues)},onSubmit:function(e){var t=this,a={id:this.$route.params.id.toString(),propertyValues:[]};JSON.parse(N()(this.propertyValues)).forEach(function(e,r){null!==e.id?a.propertyValues.push({id:e.id,value:t.setData(e)}):a.propertyValues.push({value:t.setData(e),propertyName:{id:e.propertyName.id}})}),this.$fly.post(p.property,a).then(function(a){"success"===a?e||(t.$message({message:"修改成功",duration:2e3,type:"success"}),t.$router.go(-1)):t.$message({message:"保存失败",duration:2e3,type:"error"})}).catch(function(e){console.log(e),t.$message({message:"保存失败",duration:2e3,type:"error"})})},setBreadData:function(){var e=this.$route,t=e.name,a=e.params,r=e.query,n=this.lodash.clone(this.$store.state.breadData);n.splice(1,1,{name:t,params:a,query:r}),console.log(n),this.$store.commit("SET_BREAD_DATA",n)},setData:function(e){var t=this;if(!0===e.propertyName.istable)try{return e.value.forEach(function(e,a){var r=[];t.lodash.isEmpty(e.text)||e.text.split("、").forEach(function(e){r.push({key:e})});e.value=r}),N()(e.value)}catch(e){console.log(e)}return e.value},initData:function(e){var t=JSON.parse(N()(e)),a=!0,r=!1,n=void 0;try{for(var s,o=x()(t);!(a=(s=o.next()).done);a=!0){var i=s.value;if(!0===i.propertyName.istable)try{this.lodash.isNull(i.value)&&(i.value=[]),i.value=JSON.parse(i.value),i.value.forEach(function(e){var t="",a=e.value.length;e.value.forEach(function(e,r){t+=r!==a-1?e.key+"、":e.key}),e.text=t})}catch(e){}}}catch(e){r=!0,n=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw n}}return t}},activated:function(){var e=this;this.setBreadData(),this.$fly.get(""+p.propertySearch+this.$route.params.id).then(function(t){e.infoData={name:t.name},e.propertyValues=e.initData(t.propertyValues)})}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"tools-wrap"},[e._v("\n    编辑“"+e._s(e.infoData.name)+"”\n  ")]),e._v(" "),a("div",{staticClass:"form-wrap"},[a("el-form",{attrs:{"label-position":"top","label-width":"200px"}},[e._l(e.propertyValues,function(t,r){return a("el-form-item",{key:r,class:!0===t.propertyName.istable?"child-item":"",attrs:{label:t.propertyName.name}},[!0===t.propertyName.istable?a("template",{slot:"label"},[e._v("\n          "+e._s(t.propertyName.name)+"\n          "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.addRow(r)}}},[e._v("添加分类")])],1):e._e(),e._v(" "),!1===t.propertyName.istable?a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:t.value,callback:function(a){e.$set(t,"value","string"==typeof a?a.trim():a)},expression:"item.value"}}):a("div",e._l(t.value,function(t,n){return a("el-form-item",{key:n,staticClass:"is-child",attrs:{label:""}},[a("template",{slot:"label"},[a("el-input",{attrs:{placeholder:"类名"},model:{value:t.key,callback:function(a){e.$set(t,"key","string"==typeof a?a.trim():a)},expression:"ceil.key"}})],1),e._v(" "),a("el-input",{attrs:{placeholder:"用中文顿号隔开如:专业1、专业2、专业3",type:"textarea",autosize:""},model:{value:t.text,callback:function(a){e.$set(t,"text","string"==typeof a?a.trim():a)},expression:"ceil.text"}}),e._v(" "),a("div",[a("el-button",{attrs:{type:"info ",size:"mini "},on:{click:function(t){e.delRow(r,n)}}},[e._v("删除")])],1)],2)}))],2)}),e._v(" "),a("el-form-item",{staticClass:"footer-bar"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit()}}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:function(t){e.$router.go(-1)}}},[e._v("取消")])],1)],2)],1)])},staticRenderFns:[]};var I=a("VU/8")(E,C,!1,function(e){a("HR0B")},"data-v-287261c6",null).exports;o.default.use(u.a);var R=new u.a({routes:[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:v},{path:"/home",name:"home",component:b,children:[{path:"list/:id",name:"home-list",component:$},{path:"edit/:type/:id",name:"home-edit",component:I}]}]}),S=(a("5iEN"),a("MXkr"),a("NYxO")),B=function(e){return e.breadData};o.default.use(S.a);var V=new S.a.Store({state:{breadData:[]},getters:r,actions:{},mutations:{SET_BREAD_DATA:function(e,t){e.breadData=t}},strict:!1}),A=a("4DoD");A.interceptors.request.use(function(e,t){var a=(d.a.get("user")?JSON.parse(d.a.get("user")):"").token;return a&&(e.headers.Authorization="Bearer "+a),e}),A.interceptors.response.use(function(e){return e.data},function(e){var t=e.response?e.response.data:{err:"网络请求错误",code:"-1000"};return e.response||(console.log(R.replace),R.replace({name:"login"})),t}),A.config.baseURL="http://39.104.166.195:9080/",A.config.timeout=15e3;var q=A,z=a("NETs"),O=a.n(z);o.default.config.productionTip=!1,o.default.prototype.$fly=q;o.default.use(O.a,{name:"lodash"}),o.default.use(s.a),new o.default({el:"#app",router:R,store:V,components:{App:l},template:"<App/>"}),R.beforeEach(function(e,t,a){(d.a.get("user")?JSON.parse(d.a.get("user")):"").token||"login"===e.name?a():a({name:"login"})})},nlig:function(e,t){},suYJ:function(e,t){},tvR6:function(e,t){}},["NHnr"]);