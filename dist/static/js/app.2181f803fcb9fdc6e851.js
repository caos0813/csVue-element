webpackJsonp([1],{"+Ovv":function(e,t){},"0b3M":function(e,t){},"5iEN":function(e,t){},"6bb0":function(e,t){},CuCD:function(e,t){},DZXY:function(e,t){},"Gab+":function(e,t){},HWUM:function(e,t){},MXkr:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};a.d(n,"breadData",function(){return Ve});a("tvR6");var i=a("qBF2"),s=a.n(i),l=a("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},o=a("VU/8")({name:"App"},r,!1,null,null,null).exports,c=a("/ocq"),u={login:"/security/login",getProvinces:"/provinces/search/all",generate:"/membershipCard/generate",byCondition:"/membershipCardGenerateRecord/byCondition",getMembershipCards:"/membershipCard/byCondition",exportByRecordId:"/membershipCard/exportByRecordId",getFeedback:"feedback/getFeedback",uploadToken:"secret/token",productAll:"/product/queryAll",specialDelete:"/specialTopic/delete",specialSoldOut:"/specialTopic/soldOut",specialDetail:"specialTopic/queryById",specialHandle:"/specialTopic/saveAndUpdate",specialList:"specialTopic/querySpecialTopic",articleList:"/article/queryArticleByCondition",articleDetail:"/article/queryById",articleDelete:"/article/delete",articleSoldOut:"/article/soldOut",articleHandle:"article/addAndUpdate",topicList:"/gambit/queryByCondition",topicHandle:"/gambit/addAndUpdate",topicDelete:"/gambit/delete",topicSoldOut:"/gambit/soldOut",topicDetail:"/gambit/queryById",topicHot:"/gambit/setHot",topicDeleteVote:"gambit/deleteVote"};function p(e){return("00"+e).substr(e.length)}var d=function(e,t){var a=new Date(e);/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));var n={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds()};for(var i in n)if(new RegExp("("+i+")").test(t)){var s=n[i]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?s:p(s))}return t},m=a("+TD8"),h=a.n(m),f=function(e,t){return h.a.confirm(e,t,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})};console.log(f);var g=a("lbHh"),v=a.n(g),b={data:function(){return{a:null,params:{},rules:{name:[{required:!0,message:"请输入账号",trigger:"change"}],passwords:[{required:!0,message:"请输入密码",trigger:"change"},{min:6,message:"密码长度不正确",trigger:"change"}]}}},methods:{submit:function(){var e=this;this.$refs.form.validate(function(t){t?(console.log(e.params),e.$fly.post(u.login,e.params).then(function(t){v.a.set("user",{userName:e.params.userName,token:t.token},{expires:7}),e.$message({message:"登录成功!",type:"success"}),e.$router.replace({name:"index"})}).catch(function(){e.$message({message:"登录失败",type:"error"})})):console.log("error submit!!")})}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-wrap"},[a("div",{staticClass:"form-wrap"},[a("el-form",{ref:"form",attrs:{model:e.params,rules:e.rules}},[a("el-form-item",{attrs:{prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入账号",name:"userName"},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"passWord"}},[a("el-input",{attrs:{type:"passWord",placeholder:"请输入密码",name:"passWord"},model:{value:e.params.passwords,callback:function(t){e.$set(e.params,"passwords",t)},expression:"params.passwords"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-center"},[a("el-button",{staticClass:"btn",attrs:{type:"primary","native-type":"submit",round:""},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("登录")])],1)],1)],1)])},staticRenderFns:[]};var k=a("VU/8")(b,_,!1,function(e){a("x/M6")},"data-v-9456c97a",null).exports,y={data:function(){return{defaultOpeneds:["1"],isCollapse:!1,title:"",listData:[]}},computed:{userName:function(){return v.a.get("user")?JSON.parse(v.a.get("user")).userName:""},activeIndex:function(){var e=this.$route.params.id;return"number"==typeof e&&(e=e.toString()),e},breadData:function(){return this.$store.state.breadData}},methods:{signOut:function(){v.a.remove("user"),this.$router.replace({name:"login"})}},created:function(){}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"container"},[a("el-header",{staticClass:"el-header"},[a("div",{staticClass:"logo"},[e._v("JunYang Admin")]),e._v(" "),a("div",{staticClass:"bar"},[a("div",{staticClass:"breadcrumb-wrap"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("首页")])],1)],1),e._v(" "),a("el-dropdown",[a("span",{staticClass:"el-dropdown-link"},[e._v("\n          "+e._s(e.userName)+"\n          "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown","split-button":""},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.signOut(t)}}},[e._v("退出登录")])],1)],1)],1)]),e._v(" "),a("el-container",{staticClass:"main-container"},[a("el-aside",{staticClass:"aside"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"0",collapse:e.isCollapse,"default-openeds":e.defaultOpeneds,router:""}},[a("el-menu-item",{attrs:{index:"0",route:{name:"index"}}},[a("i",{staticClass:"el-icon-tickets"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("首页")])]),e._v(" "),a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",[e._v("内容管理")])]),e._v(" "),a("el-menu-item",{attrs:{index:"1-1",route:{name:"special-list"}}},[e._v("专题")]),e._v(" "),a("el-menu-item",{attrs:{index:"1-2",route:{name:"article-list"}}},[e._v("文章")]),e._v(" "),a("el-menu-item",{attrs:{index:"1-3",route:{name:"topic-list"}}},[e._v("话题")])],2),e._v(" "),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",[e._v("志愿卡管理")])]),e._v(" "),a("el-menu-item",{attrs:{index:"2-1",route:{name:"volunteer-list"}}},[e._v("开卡管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-2",route:{name:"volunteer-use"}}},[e._v("使用管理")])],2),e._v(" "),a("el-submenu",{attrs:{index:"3"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",[e._v("个人中心")])]),e._v(" "),a("el-menu-item",{attrs:{index:"3-1",route:{name:"feedback"}}},[e._v("反馈")])],2)],1)],1),e._v(" "),a("el-main",{staticClass:"main"},[a("router-view")],1)],1)],1)},staticRenderFns:[]};var x=a("VU/8")(y,w,!1,function(e){a("+Ovv")},"data-v-38059baa",null).exports,C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"box-wrap"},[a("router-link",{staticClass:"ceil",attrs:{to:{name:"specail-list"},tag:"a"}},[e._v("\n      专题\n    ")]),e._v(" "),a("router-link",{staticClass:"ceil",attrs:{to:{name:"article-list"},tag:"a"}},[e._v("\n      文章\n    ")]),e._v(" "),a("router-link",{staticClass:"ceil",attrs:{to:{name:"topic-list"},tag:"a"}},[e._v("\n      话题\n    ")]),e._v(" "),a("router-link",{staticClass:"ceil",attrs:{to:{name:"volunteer-list"},tag:"a"}},[e._v("\n      开卡管理\n    ")]),e._v(" "),a("router-link",{staticClass:"ceil",attrs:{to:{name:"volunteer-use"},tag:"a"}},[e._v("\n      志愿卡使用管理\n    ")]),e._v(" "),a("router-link",{staticClass:"ceil",attrs:{to:{name:"feedback"},tag:"a"}},[e._v("\n      反馈\n    ")])],1)])},staticRenderFns:[]};var D=a("VU/8")(null,C,!1,function(e){a("HWUM")},"data-v-398571c7",null).exports,$=a("Xxa5"),S=a.n($),V=a("exGp"),T=a.n(V),z=a("/Z0X"),I={data:function(){return{uploadUrl:"",uploadConfig:{},loading:!1,dialogVisible:!1}},props:{value:{type:String,defaul:""},type:{type:String,default:"image"},CDN:{type:String,default:"http://fdomsimage.oss-cn-huhehaote.aliyuncs.com/"},path:{type:String,default:"image/specialtopic/"},accept:{type:String,default:"image/*"}},computed:{imageUrl:function(){return this.value}},methods:{preview:function(){this.dialogVisible=!0},upload:function(e){var t=this;return T()(S.a.mark(function a(){var n,i,s,l;return S.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.file,t.loading=!0,i=t.path,s=new z({accessKeyId:t.uploadConfig.accessKeyId,accessKeySecret:t.uploadConfig.accessKeySecret,bucket:t.uploadConfig.bucketName,endpoint:t.uploadConfig.endpoint}),a.next=6,s.multipartUpload(i+d(new Date,"yyyyMMddhhmmss"),n,{progress:function(){var t=T()(S.a.mark(function t(a){var n;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(n={}).percent=100*a,e.onProgress(n);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()});case 6:if(l=a.sent,console.log(l),200!==l.res.statusCode){a.next=13;break}return e.onSuccess(l),a.abrupt("return",l);case 13:e.onError("上传失败");case 14:case"end":return a.stop()}},a,t)}))()},handleAvatarSuccess:function(e,t){console.log(e.name),this.loading=!1;var a=this.CDN+e.name;console.log(a),this.$emit("input",a)}},created:function(){var e=this;this.$fly.get(u.uploadToken).then(function(t){e.uploadConfig=t})}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload"},[a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"avatar-uploader",attrs:{accept:e.accept,action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"http-request":e.upload,"element-loading-text":"正在上传","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[e.imageUrl?a("div",{staticClass:"uploaded-wrap"},["image"==e.type?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):e._e(),e._v(" "),"audio"==e.type?a("span",{staticClass:"el-icon-service"}):e._e(),e._v(" "),a("div",{staticClass:"btn-wrap"},[a("el-button",{attrs:{icon:"el-icon-zoom-in",size:"mini",circle:""},on:{click:function(t){return t.stopPropagation(),e.preview(t)}}})],1)]):a("i",{staticClass:"el-icon-upload avatar-uploader-icon"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,title:"预览"},on:{"update:visible":function(t){e.dialogVisible=t}}},["image"==e.type?a("img",{attrs:{width:"100%",src:e.imageUrl,alt:""}}):e._e(),e._v(" "),"audio"==e.type?a("audio",{attrs:{src:e.imageUrl,controls:""}}):e._e()])],1)},staticRenderFns:[]};var P=a("VU/8")(I,F,!1,function(e){a("Gab+")},"data-v-487ce0ec",null).exports,E={render:function(){var e=this.$createElement;return(this._self._c||e)("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left",size:"small",circle:""},on:{click:this.back}})},staticRenderFns:[]},H=a("VU/8")({methods:{back:function(){this.$router.go(-1)}}},E,!1,null,null,null).exports,N=a("//Fk"),q=a.n(N),R=a("fZjL"),O=a.n(R),U={name:"editorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var e=this;return O()(this.listObj).every(function(t){return e.listObj[t].hasSuccess})},handleSubmit:function(){var e=this,t=O()(this.listObj).map(function(t){return e.listObj[t]});this.checkAllSuccess()?(console.log(t),this.$emit("successCBK",t),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess:function(e,t){for(var a=t.uid,n=O()(this.listObj),i=0,s=n.length;i<s;i++)if(this.listObj[n[i]].uid===a)return this.listObj[n[i]].url=e.files.file,void(this.listObj[n[i]].hasSuccess=!0)},handleRemove:function(e){for(var t=e.uid,a=O()(this.listObj),n=0,i=a.length;n<i;n++)if(this.listObj[a[n]].uid===t)return void delete this.listObj[a[n]]},beforeUpload:function(e){var t=this,a=window.URL||window.webkitURL,n=e.uid;return this.listObj[n]={},new q.a(function(i,s){var l=new Image;l.src=a.createObjectURL(e),l.onload=function(){t.listObj[n]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},i(!0)})}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-container"},[a("el-button",{style:{background:e.color,borderColor:e.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("上传图片\n  ")]),e._v(" "),a("el-dialog",{attrs:{"append-to-body":"",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-upload",{staticClass:"editor-slide-upload",attrs:{action:"https://httpbin.org/post",multiple:!0,"file-list":e.fileList,"show-file-list":!0,"list-type":"picture-card","on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-upload":e.beforeUpload}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),e._v(" "),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var j=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],M=["bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor"],L={name:"tinymce",components:{editorImage:a("VU/8")(U,A,!1,function(e){a("CuCD")},"data-v-550bf360",null).exports},props:{id:{type:String},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id||"vue-tinymce-"+ +new Date,fullscreen:!1}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(t.tinymceId).setContent(e||"")})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},methods:{initTinymce:function(){var e=this,t=this;window.tinymce.init({selector:"#"+this.tinymceId,height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:M,menubar:this.menubar,plugins:j,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,language:"zh_CN",nonbreaking_force_tab:!0,init_instance_callback:function(a){t.value&&a.setContent(t.value),t.hasInit=!0,a.on("NodeChange Change KeyUp SetContent",function(){e.hasChange=!0,e.$emit("input",a.getContent())})},setup:function(e){e.on("FullscreenStateChanged",function(e){t.fullscreen=e.state})}})},destroyTinymce:function(){window.tinymce.get(this.tinymceId)&&window.tinymce.get(this.tinymceId).destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){var t=this;e.forEach(function(e){window.tinymce.get(t.tinymceId).insertContent('<img class="wscnph" src="'+e.url+'" >')})}},destroyed:function(){this.destroyTinymce()}},B={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:this.fullscreen}},[t("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}})])},staticRenderFns:[]};var K=a("VU/8")(L,B,!1,function(e){a("6bb0")},"data-v-26d98630",null).exports,W={data:function(){return{firstData:[],secondData:[],pickerVal:[]}},props:{value:{type:Array,default:function(){return[]}},span:{type:Number,default:6},size:{type:String,default:""},column:{type:Number,default:1}},watch:{value:{handler:function(e){this.pickerVal=e},immediate:!0}},methods:{firstChange:function(e,t){var a=this.lodash.findIndex(this.firstData,function(t){return t.id===e});this.secondData=this.firstData[a].specialTopics,t||this.pickerVal.splice(1,2),this.$emit("input",this.pickerVal)},secondChange:function(e,t){this.$emit("input",this.pickerVal)}},created:function(){var e=this;this.$fly.get(u.productAll).then(function(t){e.firstData=t,e.lodash.isUndefined(e.pickerVal[0])||e.firstChange(e.pickerVal[0],!0)})}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"picker-wrap"},[a("el-col",{attrs:{span:e.span}},[a("el-select",{staticClass:"full",attrs:{placeholder:"请选择产品",size:e.size},on:{change:e.firstChange},model:{value:e.pickerVal[0],callback:function(t){e.$set(e.pickerVal,0,t)},expression:"pickerVal[0]"}},e._l(e.firstData,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),2===e.column?a("el-col",{attrs:{span:e.span}},[a("el-select",{staticClass:"full",attrs:{placeholder:"请选择专题",size:e.size},on:{change:e.secondChange},model:{value:e.pickerVal[1],callback:function(t){e.$set(e.pickerVal,1,t)},expression:"pickerVal[1]"}},e._l(e.secondData,function(e,t){return a("el-option",{key:t,attrs:{label:e.title,value:e.id}})}))],1):e._e()],1)},staticRenderFns:[]};var Y=a("VU/8")(W,X,!1,function(e){a("DZXY")},"data-v-571006cc",null).exports,G={props:{showHot:{type:Boolean,default:!1},checkIds:{type:Array,default:function(){return[]}}},methods:{handleFn:function(e){var t=this,a=this.$route.name.split("-")[0];if("add"===e)this.toState({name:a,params:{type:"add"}});else{var n=void 0,i=void 0;"delete"===e?(n=u[a+"Delete"],i="删除"):"soldOut"===e?(n=u[a+"SoldOut"],i="下架"):"hot"===e&&(n=u[a+"Hot"],i="设为热门"),f("您确定将选择的内容"+i+"吗？","提示").then(function(){t.$fly.post(n,t.checkIds).then(function(e){t.$message({message:i+"成功",duration:2e3,type:"success"}),t.$emit("refresh")}).catch(function(){t.$message({message:i+"失败",duration:2e3,type:"error"})})})}}},beforeMount:function(){console.log(this.$route)}},J={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"button-wrap"},[e.showHot?a("el-button",{attrs:{type:"danger",size:"small",disabled:e.checkIds.length<1},on:{click:function(t){e.handleFn("hot")}}},[e._v("设为热门")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.handleFn("add")}}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"warning",size:"small",disabled:e.checkIds.length<1},on:{click:function(t){e.handleFn("soldOut")}}},[e._v("下架")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small",disabled:e.checkIds.length<1},on:{click:function(t){e.handleFn("delete")}}},[e._v("删除")])],1)},staticRenderFns:[]};var Z=a("VU/8")(G,J,!1,function(e){a("Q21+")},null,null).exports,Q={data:function(){return{params:{title:null,page:1,size:15,sortType:1},checkIds:[],pickerVal:[],pageInfo:{},tableData:[]}},components:{picker:Y,listHandle:Z},methods:{refresh:function(){this.getData(this.params)},handleSelectionChange:function(e){this.checkIds=this.lodash.map(e,"id")},changePage:function(e){this.params.page=e,this.getData(this.params)},reset:function(){this.params={title:null,page:1,size:15,sortType:1},this.pickerVal=[],this.getData(this.params)},search:function(){console.log(this.pickerVal),this.params.productId=this.pickerVal[0],this.getData(this.params)},getData:function(e){var t=this,a=this.lodash.clone(e);a.page--,console.log(e),this.$fly.get(u.specialList,a).then(function(a){t.tableData=a.content,t.pageInfo={totalPages:a.totalPages,size:e.size,currentPage:e.page}})}},created:function(){this.getData(this.params)}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"tools-bar"},[a("div",{staticClass:"left-wrap"},[a("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索关键字",size:"small"},model:{value:e.params.title,callback:function(t){e.$set(e.params,"title",t)},expression:"params.title"}}),e._v(" "),a("picker",{attrs:{size:"small",span:-1},model:{value:e.pickerVal,callback:function(t){e.pickerVal=t},expression:"pickerVal"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.reset}},[e._v("重置")])],1),e._v(" "),a("listHandle",{attrs:{checkIds:e.checkIds},on:{refresh:e.refresh}})],1),e._v(" "),a("el-table",{ref:"multipleTable",attrs:{"header-cell-class-name":"tableHeader",data:e.tableData,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"推荐",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"small",type:1===t.row.isHomePageShow?"danger":"info"}},[e._v(e._s(t.row.isHomePageShow?"推荐":"不推荐"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"操作人",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"small",type:e._f("publicStatus")(t.row.status,"style")}},[e._v(e._s(e._f("publicStatus")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.createTime))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发布时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.publishTime))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text ",size:"mini"}},[a("router-link",{attrs:{to:{name:"special",params:{type:"edit"},query:{id:t.row.id}},tag:"span"}},[e._v("编辑")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"page-wrap"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next ","current-page":e.pageInfo.currentPage,"page-count":e.pageInfo.totalPages,"page-size":e.pageInfo.size},on:{"current-change":e.changePage}})],1)],1)},staticRenderFns:[]};var te=a("VU/8")(Q,ee,!1,function(e){a("mqBW")},"data-v-388b79ea",null).exports,ae={data:function(){return{params:{title:null,page:1,size:15,sortType:1},checkIds:[],pickerVal:[],pageInfo:{},tableData:[]}},components:{picker:Y,listHandle:Z},methods:{handleSelectionChange:function(e){this.checkIds=this.lodash.map(e,"id"),console.log(this.checkIds)},changePage:function(e){this.params.page=e,this.getData(this.params)},reset:function(){this.params={title:null,page:1,size:15,sortType:1},this.pickerVal=[],this.getData(this.params)},search:function(){console.log(this.pickerVal),this.params.productId=this.pickerVal[0],this.params.specialTopicId=this.pickerVal[1],this.getData(this.params)},refresh:function(){this.getData(this.params)},getData:function(e){var t=this,a=this.lodash.clone(e);a.page--,console.log(e),this.$fly.get(u.articleList,a).then(function(a){t.tableData=a.content,t.pageInfo={totalPages:a.totalPages,size:e.size,currentPage:e.page}})}},created:function(){this.getData(this.params)}},ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"tools-bar"},[a("div",{staticClass:"left-wrap"},[a("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索关键字",size:"small"},model:{value:e.params.title,callback:function(t){e.$set(e.params,"title",t)},expression:"params.title"}}),e._v(" "),a("picker",{attrs:{size:"small",span:-1,column:2},model:{value:e.pickerVal,callback:function(t){e.pickerVal=t},expression:"pickerVal"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.reset}},[e._v("重置")])],1),e._v(" "),a("listHandle",{attrs:{checkIds:e.checkIds},on:{refresh:e.refresh}})],1),e._v(" "),a("el-table",{ref:"multipleTable",attrs:{"header-cell-class-name":"tableHeader",data:e.tableData,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"标题",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.title))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"推荐",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"small",type:1===t.row.isHomePageShow?"danger":"info"}},[e._v(e._s(t.row.isHomePageShow?"推荐":"不推荐"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"所属专题",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.product.name)+"、"+e._s(t.row.specialTopic.title))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"操作人",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"small",type:e._f("publicStatus")(t.row.status,"style")}},[e._v(e._s(e._f("publicStatus")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"totalReadNum",label:"阅读量",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.createTime))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发布时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.publishTime))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text ",size:"mini"}},[a("router-link",{attrs:{to:{name:"article",params:{type:"edit"},query:{id:t.row.id}},tag:"span"}},[e._v("编辑")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"page-wrap"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:1e3}})],1)],1)},staticRenderFns:[]};var ie=a("VU/8")(ae,ne,!1,function(e){a("c56G")},"data-v-8f53db7a",null).exports,se={data:function(){return{params:{title:null,page:1,size:15,sortType:1},checkIds:[],pickerVal:[],pageInfo:{},tableData:[]}},components:{picker:Y,listHandle:Z},methods:{handleSelectionChange:function(e){this.checkIds=this.lodash.map(e,"id"),console.log(this.checkIds)},changePage:function(e){this.params.page=e,this.getData(this.params)},reset:function(){this.params={title:null,page:1,size:15,sortType:1},this.pickerVal=[],this.getData(this.params)},search:function(){console.log(this.pickerVal),this.params.productId=this.pickerVal[0],this.getData(this.params)},refresh:function(){this.getData(this.params)},getData:function(e){var t=this,a=this.lodash.clone(e);a.page--,console.log(e),this.$fly.get(u.topicList,a).then(function(a){t.tableData=a.content,t.pageInfo={totalPages:a.totalPages,size:e.size,currentPage:e.page}})}},created:function(){this.getData(this.params)}},le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"tools-bar"},[a("div",{staticClass:"left-wrap"},[a("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索关键字",size:"small"},model:{value:e.params.title,callback:function(t){e.$set(e.params,"title",t)},expression:"params.title"}}),e._v(" "),a("picker",{attrs:{size:"small",span:-1},model:{value:e.pickerVal,callback:function(t){e.pickerVal=t},expression:"pickerVal"}}),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.reset}},[e._v("重置")])],1),e._v(" "),a("listHandle",{attrs:{checkIds:e.checkIds,"show-hot":""},on:{refresh:e.refresh}})],1),e._v(" "),a("el-table",{ref:"multipleTable",attrs:{"header-cell-class-name":"tableHeader",data:e.tableData,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"标题",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.title))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否热门",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"small",type:1===t.row.isHot?"danger":"info"}},[e._v(e._s(t.row.isHot?"是":"否"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"所属产品",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.product.name))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"操作人",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"small",type:e._f("publicStatus")(t.row.status,"style")}},[e._v(e._s(e._f("publicStatus")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"totalReadNum",label:"阅读量",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.createTime))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发布时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.publishTime))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text ",size:"mini"}},[a("router-link",{attrs:{to:{name:"topic",params:{type:"edit"},query:{id:t.row.id}},tag:"span"}},[e._v("编辑")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"page-wrap"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:1e3}})],1)],1)},staticRenderFns:[]},re=a("VU/8")(se,le,!1,null,null,null).exports,oe={data:function(){return{rules:{title:[{required:!0,message:"请输入专题名称",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}],pickerVal:[{required:!0,validator:function(e,t,a){t.length<1?a(new Error("请选择产品")):a()},trigger:"blur"}]},params:{title:"",isHot:0,type:0,pickerVal:[]},optionData:[],mode:"general"}},components:{Tinymce:K,picker:Y},methods:{modeChange:function(e){"general"===e?this.params.type=0:this.params.type||(this.params.type=1)},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;var a=e.params,n=a.title,i=a.isHot,s=a.pickerVal,l=a.type,r=a.id,o=a.content,c=a.publishTime,p="vote"===e.mode?e.optionData:null;e.lodash.isArray(p)&&p.length<1?e.$message({message:"请添加选项",duration:2e3,type:"error"}):e.$fly.post(u.topicHandle,{id:r,title:n,isHot:i,publishTime:c?new Date(c).getTime():null,content:o,type:l,votes:p,productId:s[0]}).then(function(t){e.$message({message:"保存成功",duration:2e3,type:"success"}),e.$refs.form.resetFields(),e.goBack()}).catch(function(){e.$message({message:"保存失败",duration:2e3,type:"error"})})})},addRow:function(){this.optionData.push({name:""})},delRow:function(e){var t=this;console.log(e);var a=e.$index;"edit"===this.$route.params.type?this.$fly.post(u.topicDeleteVote,{id:e.row.id}).then(function(e){t.optionData.splice(a,1)}).catch(function(){t.$message({message:"删除失败",duration:2e3,type:"error"})}):this.optionData.splice(a,1)},moveRow:function(e,t){var a=e.$index,n=this.optionData[a];"up"===t?(this.optionData.splice(a,1),this.optionData.splice(a-1,0,n)):(this.optionData.splice(a,1),this.optionData.splice(a+1,0,n))}},created:function(){var e=this,t=this.$route.params.type,a=this.$route.query.id;"edit"===t&&this.$fly.get(u.topicDetail,{id:a}).then(function(t){e.params=t,e.optionData=t.votes,e.params.pickerVal=[t.product.id],1!==t.type&&2!==t.type||(e.mode="vote")})}},ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"tools-bar"},[a("div",{staticClass:"left-wrap"},[a("back")],1),e._v(" "),a("div",{staticClass:"button-wrap"},[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.submit}},[e._v("保存草稿")])],1)]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.params,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"产品",prop:"pickerVal"}},[a("picker",{model:{value:e.params.pickerVal,callback:function(t){e.$set(e.params,"pickerVal",t)},expression:"params.pickerVal"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-col",{attrs:{span:6}},[a("el-select",{staticClass:"full",attrs:{placeholder:""},on:{change:e.modeChange},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[a("el-option",{attrs:{value:"general",label:"普通话题"}}),e._v(" "),a("el-option",{attrs:{value:"vote",label:"投票"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:e.params.title,callback:function(t){e.$set(e.params,"title",t)},expression:"params.title"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{"label-width":"20px",prop:"isHot"}},[[a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.params.isHot,callback:function(t){e.$set(e.params,"isHot",t)},expression:"params.isHot"}},[e._v("是否热门")])]],2)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发布时间"}},[a("el-col",{attrs:{span:6}},[a("el-date-picker",{staticClass:"full",attrs:{type:"datetime",placeholder:"请选择发布时间"},model:{value:e.params.publishTime,callback:function(t){e.$set(e.params,"publishTime",t)},expression:"params.publishTime"}})],1)],1),e._v(" "),"vote"===e.mode?a("el-form-item",[a("el-form-item",[a("el-button",{attrs:{type:"info",size:"small"},on:{click:e.addRow}},[e._v("添加选项")]),e._v(" "),a("div",{staticClass:"radio-wrap"},[a("el-radio-group",{model:{value:e.params.type,callback:function(t){e.$set(e.params,"type",t)},expression:"params.type"}},[a("el-radio",{attrs:{label:1}},[e._v("单选")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("多选")])],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-col",{attrs:{span:18}},[a("el-table",{attrs:{data:e.optionData,border:"","show-header":!1}},[a("el-table-column",{attrs:{label:"索引",align:"center",type:"index",width:"150px"}}),e._v(" "),a("el-table-column",{attrs:{label:"内容",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:""},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",circle:""},on:{click:function(a){e.delRow(t)}}})]}}])})],1)],1)],1):e._e(),e._v(" "),a("el-form-item",[a("el-form-item",[a("el-col",{attrs:{span:18}},[a("Tinymce",{ref:"editor",attrs:{height:600},model:{value:e.params.content,callback:function(t){e.$set(e.params,"content",t)},expression:"params.content"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var ue=a("VU/8")(oe,ce,!1,function(e){a("OyPj")},"data-v-7b849396",null).exports,pe={data:function(){return{rules:{title:[{required:!0,message:"请输入专题名称",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}],textarea:[{required:!0,message:"请输入音频描述",trigger:"blur"}],image:[{required:!0,message:"请上传封面",trigger:"blur"}],audioPath:[{required:!0,message:"请上传音频",trigger:"blur"}],pickerVal:[{required:!0,validator:function(e,t,a){t.length<2?a(new Error("请选择产品分类和专题")):a()},trigger:"blur"}]},params:{title:"",isHomePageShow:0,audioFlag:0,pickerVal:[],image:""}}},components:{upload:P,Tinymce:K,picker:Y},methods:{submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;var a=e.params,n=a.title,i=a.isHomePageShow,s=a.image,l=a.pickerVal,r=a.id,o=a.content,c=a.publishTime,p=a.audioPath,d=a.audioFlag,m=a.textarea;e.$fly.post(u.articleHandle,{id:r,title:n,audioPath:d?p:null,isHomePageShow:i,publishTime:c?new Date(c).getTime():null,image:d?null:s,content:d?m:o,specialTopicId:l[1],productId:l[0]}).then(function(t){e.$message({message:"保存成功",duration:2e3,type:"success"}),e.$refs.form.resetFields(),e.goBack()}).catch(function(){e.$message({message:"保存失败",duration:2e3,type:"error"})})})}},created:function(){var e=this,t=this.$route.params.type,a=this.$route.query.id;"edit"===t&&this.$fly.get(u.articleDetail,{id:a}).then(function(t){e.params=t,e.lodash.isNull(t.audioPath)?e.params.audioFlag=0:(e.params.audioFlag=1,e.params.textarea=t.content),e.params.pickerVal=[t.product.id,t.specialTopic.id]})}},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"tools-bar"},[a("div",{staticClass:"left-wrap"},[a("back")],1),e._v(" "),a("div",{staticClass:"button-wrap"},[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.submit}},[e._v("保存")])],1)]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.params,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"专题",prop:"pickerVal"}},[a("picker",{attrs:{column:2},model:{value:e.params.pickerVal,callback:function(t){e.$set(e.params,"pickerVal",t)},expression:"params.pickerVal"}}),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{"label-width":"20px",prop:"delivery"}},[[a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.params.audioFlag,callback:function(t){e.$set(e.params,"audioFlag",t)},expression:"params.audioFlag"}},[e._v("音频")])]],2)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:e.params.title,callback:function(t){e.$set(e.params,"title",t)},expression:"params.title"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{"label-width":"20px",prop:"delivery"}},[[a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.params.isHomePageShow,callback:function(t){e.$set(e.params,"isHomePageShow",t)},expression:"params.isHomePageShow"}},[e._v("首页显示")])]],2)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发布时间"}},[a("el-col",{attrs:{span:6}},[a("el-date-picker",{staticClass:"full",attrs:{type:"datetime",placeholder:"请选择发布时间"},model:{value:e.params.publishTime,callback:function(t){e.$set(e.params,"publishTime",t)},expression:"params.publishTime"}})],1)],1),e._v(" "),1===e.params.audioFlag?a("div",[a("el-form-item",{attrs:{label:"音频",prop:"audioPath"}},[a("upload",{attrs:{type:"audio",accept:"audio/*",path:"audio/article/"},model:{value:e.params.audioPath,callback:function(t){e.$set(e.params,"audioPath",t)},expression:"params.audioPath"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"音频描述",prop:"textarea"}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入音频描述",type:"textarea",rows:6},model:{value:e.params.textarea,callback:function(t){e.$set(e.params,"textarea",t)},expression:"params.textarea"}})],1)],1)],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1!==e.params.audioFlag,expression:"params.audioFlag!==1"}]},[a("el-form-item",{attrs:{label:"封面",prop:e.params.audioFlag?"":"image"}},[a("upload",{attrs:{path:"image/article/"},model:{value:e.params.image,callback:function(t){e.$set(e.params,"image",t)},expression:"params.image"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:e.params.audioFlag?"":"content"}},[a("el-col",{attrs:{span:18}},[a("Tinymce",{ref:"editor",attrs:{height:600},model:{value:e.params.content,callback:function(t){e.$set(e.params,"content",t)},expression:"params.content"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var me=a("VU/8")(pe,de,!1,function(e){a("0b3M")},"data-v-bc2a3370",null).exports,he={data:function(){return{rules:{title:[{required:!0,message:"请输入专题名称",trigger:"blur"}],filePath:[{required:!0,message:"请上传封面",trigger:"blur"}],pickerVal:[{required:!0,validator:function(e,t,a){t.length<1?a(new Error("请选择产品和分类")):a()},trigger:"blur"}]},params:{title:"",isHomePageShow:0,pickerVal:[],filePath:""}}},components:{upload:P,picker:Y},methods:{submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;var a=e.params,n=a.title,i=a.isHomePageShow,s=a.filePath,l=a.pickerVal,r=a.id;e.$fly.post(u.specialHandle,{id:r,title:n,isHomePageShow:i,filePath:s,productId:l[0]}).then(function(t){e.$message({message:"保存成功",duration:2e3,type:"success"}),e.$refs.form.resetFields(),e.goBack()}).catch(function(){e.$message({message:"保存失败",duration:2e3,type:"error"})})})}},created:function(){var e=this,t=this.$route.params.type,a=this.$route.query.id;"edit"===t&&this.$fly.get(u.specialDetail,{id:a}).then(function(t){e.params=t,e.params.pickerVal=[t.productId]})}},fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"tools-bar"},[a("div",{staticClass:"left-wrap"},[a("back")],1),e._v(" "),a("div",{staticClass:"button-wrap"},[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.submit}},[e._v("保存草稿")])],1)]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.params,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"pickerVal",label:"产品"}},[a("picker",{model:{value:e.params.pickerVal,callback:function(t){e.$set(e.params,"pickerVal",t)},expression:"params.pickerVal"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"专题名称",prop:"title"}},[a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:e.params.title,callback:function(t){e.$set(e.params,"title",t)},expression:"params.title"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{"label-width":"20px"}},[[a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.params.isHomePageShow,callback:function(t){e.$set(e.params,"isHomePageShow",t)},expression:"params.isHomePageShow"}},[e._v("首页显示")])]],2)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"封面",prop:"filePath"}},[a("upload",{model:{value:e.params.filePath,callback:function(t){e.$set(e.params,"filePath",t)},expression:"params.filePath"}})],1)],1)],1)},staticRenderFns:[]};var ge=a("VU/8")(he,fe,!1,function(e){a("jact")},"data-v-5e1d055d",null).exports,ve={data:function(){return{date:null,pickerOptions2:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",[new Date,new Date])}},{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},searchName:"",tableData:[],pageInfo:{},loading:!1,pageSizes:[100,200,300,400],addDialog:!1,addForm:{province:"",number:1,type:"ALL"},provinceArr:[],rules:{province:[{required:!0,message:"省份不能为空",trigger:"change"},{validator:function(e,t,a){if("0"===t)return a(new Error("请选择省份"));a()},trigger:"change"}],number:[{type:"number",required:!0,message:"数量不能为空",trigger:"blur"},{validator:function(e,t,a){if(!/^[1-9]\d*$/.test(t))return a(new Error("数量必须是大于0的正整数"));a()},trigger:"blur"}],type:[{required:!0,message:"类型不能为空",trigger:"change"}]}}},computed:{params:function(){return{page:0,size:10,beginDate:this.date?this.date[0]:null,endDate:this.date?this.date[1]:null}}},methods:{dateChange:function(e){this.getData(this.params)},currentChange:function(e){this.params.page=e-1,this.getData(this.params)},handlerExprot:function(e){window.open(this.$fly.config.baseURL+u.exportByRecordId+"/"+e)},openCard:function(){this.addDialog=!0,this.getProvinces(),this.$refs.addForm&&this.$refs.addForm.resetFields()},save:function(){var e=this,t={count:this.addForm.number,provinceId:this.addForm.province,type:this.addForm.type};this.$refs.addForm.validate(function(a){a&&e.$fly.post(u.generate,t).then(function(t){e.$message({message:"生成成功!",type:"success"}),e.getData(e.params),e.addDialog=!1}).catch(function(){e.$message({message:"生成失败",type:"error"})})})},resetForm:function(){this.$refs.addForm.resetFields()},getProvinces:function(){var e=this;this.$fly.get(u.getProvinces).then(function(t){var a=t._embedded.provinces;e.provinceArr=a}).catch(function(e){console.log(e)})},getData:function(e){var t=this;this.$fly.get(u.byCondition,e).then(function(e){var a=e.pageable,n=e.content,i=e.totalElements;t.pageInfo=a,t.pageInfo.totalElements=i,t.tableData=n})}},watch:{$route:function(e,t){"volunteer-list"===e.name&&"volunteer-list"!==t.name&&this.getData(this.params)}},beforeMount:function(){console.log(this.params),this.getData(this.params)}},be={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"tools-bar"},[a("div",{staticClass:"left-wrap"},[a("div",{staticClass:"ceil-box"},[a("el-date-picker",{attrs:{size:"small",type:"daterange","unlink-panels":"","range-separator":"至 ","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2,"value-format":"timestamp"},on:{change:e.dateChange},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)]),e._v(" "),a("div",{staticClass:"button-wrap"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.openCard}},[e._v("开卡")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,"header-cell-style":{background:"#F5F7FA"},"element-loading-text":"拼命加载中",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"provinceName",label:"开卡省份",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("ALL"===t.row.type?"全功能":"志愿卡"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"count",label:"数量",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"activatedCount",label:"激活数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createdDate",label:"开卡时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateTime")(t.row.createdDate,"yyyy-MM-dd hh:mm:ss")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handlerExprot(t.row.id)}}},[e._v("导出")])]}}])})],1),e._v(" "),a("div",{staticClass:"page-wrap text-left padding "},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next,sizes, jumper","page-sizes":e.pageSizes,"current-page":e.pageInfo.pageNumber+1,total:e.pageInfo.totalElements,"page-size":e.pageInfo.pageSize},on:{"current-change":e.currentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"开卡",visible:e.addDialog,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){e.addDialog=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"inline-message":"",rules:e.rules,"label-suffix":":","label-width":"100"}},[a("el-form-item",{attrs:{label:"省份",prop:"province"}},[a("el-select",{attrs:{placeholder:"选择省份"},model:{value:e.addForm.province,callback:function(t){e.$set(e.addForm,"province",t)},expression:"addForm.province"}},[a("el-option",{attrs:{label:"请选择",value:"0"}}),e._v(" "),e._l(e.provinceArr,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"数量",prop:"number"}},[a("el-input-number",{staticStyle:{width:"217px"},attrs:{"controls-position":"right"},model:{value:e.addForm.number,callback:function(t){e.$set(e.addForm,"number",t)},expression:"addForm.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"选择开卡类型"},model:{value:e.addForm.type,callback:function(t){e.$set(e.addForm,"type",t)},expression:"addForm.type"}},[a("el-option",{attrs:{label:"全功能",value:"ALL"}}),e._v(" "),a("el-option",{attrs:{label:"志愿卡",value:"VOLUNTEER"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("生成志愿卡")])],1)],1)],1)},staticRenderFns:[]};var _e=a("VU/8")(ve,be,!1,function(e){a("RTIj")},null,null).exports,ke={data:function(){return{date:"",status:"",pickerOptions2:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",[new Date,new Date])}},{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},tableData:[],pageInfo:{},loading:!1,pageSizes:[10,100,200,500]}},computed:{params:function(){var e=void 0;return e="true"===this.status||"false"!==this.status&&"",{page:0,size:10,beginDate:this.date?this.date[0]:null,endDate:this.date?this.date[1]:null,activated:e}}},methods:{dateChange:function(){this.getData(this.params)},activeChange:function(e){console.log(this.params),this.getData(this.params)},currentChange:function(e){this.params.page=e-1,this.getData(this.params)},getData:function(e){var t=this;this.pageInfo={},this.tableData=[],this.$fly.get(u.getMembershipCards,e).then(function(e){var a=e.pageable,n=e.content,i=e.totalElements;t.pageInfo=a,t.pageInfo.totalElements=i,t.tableData=n})}},watch:{$route:function(e,t){"volunteer-use"===e.name&&"volunteer-use"!==t.name&&this.getData(this.params)}},beforeMount:function(){this.getData(this.params)}},ye={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"tools-bar"},[a("div",{staticClass:"left-wrap"},[a("div",{staticClass:"ceil-box"},[a("el-date-picker",{attrs:{size:"small",type:"daterange","unlink-panels":"","range-separator":"至 ","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2,"value-format":"timestamp"},on:{change:e.dateChange},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),e._v(" "),a("div",{staticClass:"ceil-box"},[a("el-select",{attrs:{placeholder:"请选择激活状态",size:"small"},on:{change:e.activeChange},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"已激活",value:"true"}}),e._v(" "),a("el-option",{attrs:{label:"未激活",value:"false"}})],1)],1)])]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,"header-cell-style":{background:"#F5F7FA"},"element-loading-text":"拼命加载中",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"激活卡号",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phoneNumber",label:"绑定账号",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("ALL"===t.row.type?"全功能":"志愿卡"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"activatedDate",label:"是否激活",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(null===t.row.activatedDate?"否":"是"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createdDate",label:"绑定时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateTime")(t.row.createdDate,"yyyy-MM-dd hh:mm:ss")))])]}}])})],1),e._v(" "),a("div",{staticClass:"page-wrap text-left padding "},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next,sizes, jumper","page-sizes":e.pageSizes,"current-page":e.pageInfo.pageNumber+1,total:e.pageInfo.totalElements,"page-size":e.pageInfo.pageSize},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]},we=a("VU/8")(ke,ye,!1,null,null,null).exports,xe={data:function(){return{date:null,pickerOptions2:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",[new Date,new Date])}},{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},name:"",phoneNum:"",searchName:"",tableData:[],pageInfo:{},loading:!1,pageSizes:[100,200,300,400]}},computed:{params:function(){return{page:0,size:10,time:this.date?this.date:null,phoneNum:"",name:""}}},methods:{dateChange:function(e){this.getData(this.params)},currentChange:function(e){this.params.page=e-1,this.getData(this.params)},getData:function(e){var t=this;this.$fly.get(u.getFeedback,e).then(function(e){var a=e.pageable,n=e.content,i=e.totalElements;t.pageInfo=a,t.pageInfo.totalElements=i,t.tableData=n})}},watch:{$route:function(e,t){"volunteer-list"===e.name&&"volunteer-list"!==t.name&&this.getData(this.params)}},beforeMount:function(){console.log(this.params),this.getData(this.params)}},Ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"tools-bar"},[a("div",{staticClass:"left-wrap"},[a("div",{staticClass:"ceil-box"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"timestamp"},on:{change:e.dateChange},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),e._v(" "),a("div",{staticClass:"ceil-box"},[a("el-input",{attrs:{placeholder:"请输入昵称"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("div",{staticClass:"ceil-box"},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.phoneNum,callback:function(t){e.phoneNum=t},expression:"phoneNum"}})],1)])]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,"header-cell-style":{background:"#F5F7FA"},"element-loading-text":"拼命加载中",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"昵称",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phoneNum",label:"手机号",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"时间",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateTime")(t.row.time,"yyyy-MM-dd hh:mm:ss")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"反馈内容",align:"center"}})],1),e._v(" "),a("div",{staticClass:"page-wrap text-left padding "},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next,sizes, jumper","page-sizes":e.pageSizes,"current-page":e.pageInfo.pageNumber+1,total:e.pageInfo.totalElements,"page-size":e.pageInfo.pageSize},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var De=a("VU/8")(xe,Ce,!1,function(e){a("YtkK")},null,null).exports;l.default.use(c.a);var $e=new c.a({routes:[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:k},{path:"/view",component:x,redirect:{name:"index"},meta:{requireAuth:!0},children:[{path:"/index",name:"index",component:D,meta:{requireAuth:!0}},{path:"/special-list",name:"special-list",component:te,meta:{requireAuth:!0}},{path:"/special/:type",name:"special",component:ge,meta:{requireAuth:!0}},{path:"/article-list",name:"article-list",component:ie,meta:{requireAuth:!0}},{path:"/article/:type",name:"article",component:me,meta:{requireAuth:!0}},{path:"/topic-list",name:"topic-list",component:re,meta:{requireAuth:!0}},{path:"/topic/:type",name:"topic",component:ue,meta:{requireAuth:!0}},{path:"/volunteer-list",name:"volunteer-list",component:_e},{path:"/volunteer-use",name:"volunteer-use",component:we},{path:"/feedback",name:"feedback",component:De}]}]}),Se=(a("j1ja"),a("5iEN"),a("MXkr"),a("NYxO")),Ve=function(e){return e.breadData};l.default.use(Se.a);var Te=new Se.a.Store({state:{breadData:[]},getters:n,actions:{},mutations:{SET_BREAD_DATA:function(e,t){e.breadData=t}},strict:!1}),ze=a("2X9z"),Ie=a.n(ze),Fe=a("4DoD");Fe.interceptors.request.use(function(e,t){var a=(v.a.get("user")?JSON.parse(v.a.get("user")):"").token;a&&(e.headers.Authorization="Bearer "+a);var n=e.body;for(var i in n)null!==n[i]&&void 0!==n[i]||delete n[i];return e}),Fe.interceptors.response.use(function(e){return e.data},function(e){var t=e.response?e.response.data:{err:"网络请求错误",code:"-1000"};return e.response||Ie()({message:"接口调用失败",type:"error"}),t}),console.log(Object({NODE_ENV:"production",CORS:void 0})),Fe.config.baseURL="http://edit.junyanginfo.com:8082",Fe.config.timeout=15e3;var Pe=Fe,Ee=a("NETs"),He=a.n(Ee),Ne={filters:{dateTime:function(e,t){return d(new Date(e),t)},publicStatus:function(e,t){var a=void 0;switch(e){case 1:a="已发布",t&&(a="success");break;case 2:a="草稿",t&&(a="info");break;case 3:a="已下架",t&&(a="warning")}return a}}};l.default.config.productionTip=!1,l.default.prototype.$fly=Pe;l.default.use(He.a,{name:"lodash"}),l.default.use(s.a),l.default.component("back",H),l.default.mixin(Ne),l.default.mixin({methods:{toState:function(e){this.$router.push(e)},goBack:function(e){this.$router.go(e||-1)}}}),$e.beforeEach(function(e,t,a){var n=(v.a.get("user")?JSON.parse(v.a.get("user")):"").token;e.meta.requireAuth&&!n||a()}),new l.default({el:"#app",router:$e,store:Te,components:{App:o},template:"<App/>"})},OyPj:function(e,t){},"Q21+":function(e,t){},RTIj:function(e,t){},YtkK:function(e,t){},c56G:function(e,t){},jact:function(e,t){},mqBW:function(e,t){},tvR6:function(e,t){},"x/M6":function(e,t){}},["NHnr"]);