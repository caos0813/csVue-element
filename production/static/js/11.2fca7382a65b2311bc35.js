webpackJsonp([11],{F969:function(e,s){},Luci:function(e,s,r){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=r("Xxa5"),t=r.n(a),n=r("exGp"),o=r.n(n),i=r("0xDb"),u=r("lbHh"),m=r.n(u),l={data:function(){return{params:{},rules:{name:[{required:!0,message:"请输入账号",trigger:"change"}],passwords:[{required:!0,message:"请输入密码",trigger:"change"},{min:6,message:"密码长度不正确",trigger:"change"}]}}},methods:{getConfig:function(e){var s=this;return o()(t.a.mark(function r(){var a,n,o,u;return t.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a=e.token.token,r.next=4,s.$fly.get(i.a.uploadToken,{},{headers:{Authorization:"Bearer "+a}});case 4:n=r.sent,o=s.lodash.isUndefined(e.user.roles[0])?[]:e.user.roles[0].authorities,u=[],o.map(function(e){u.push(e.name)}),m.a.set("user",{userName:e.user.username,token:a,uploadConfig:n,authority:u,rolesId:s.lodash.isUndefined(e.user.roles[0])?"":e.user.roles[0].id,rolesName:s.lodash.isUndefined(e.user.roles[0])?"":e.user.roles[0].name},{expires:7}),s.$message({message:"登录成功!",type:"success"}),s.$router.replace({name:"index"}),r.next=17;break;case 13:r.prev=13,r.t0=r.catch(0),console.log(r.t0),s.$message({message:"登录失败",type:"error"});case 17:case"end":return r.stop()}},r,s,[[0,13]])}))()},submit:function(){var e=this;this.$refs.form.validate(function(s){s?(m.a.remove("user"),e.$fly.post(i.a.login,e.params).then(function(s){1e5===s.status?e.getConfig(s.data.body):100003===s.status?e.$message({message:""+s.message,type:"error"}):e.$message({message:"登录失败，账号或密码错误",type:"error"})}).catch(function(){e.$message({message:"登录失败",type:"error"})})):console.log("error submit!!")})}}},p={render:function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"login-wrap"},[r("div",{staticClass:"form-wrap"},[r("el-form",{ref:"form",attrs:{model:e.params,rules:e.rules}},[r("el-form-item",{attrs:{prop:"userName"}},[r("el-input",{attrs:{placeholder:"请输入账号",name:"userName"},model:{value:e.params.username,callback:function(s){e.$set(e.params,"username",s)},expression:"params.username"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"passWord"}},[r("el-input",{attrs:{type:"passWord",placeholder:"请输入密码",name:"passWord"},model:{value:e.params.password,callback:function(s){e.$set(e.params,"password",s)},expression:"params.password"}})],1),e._v(" "),r("el-form-item",{staticClass:"text-center"},[r("el-button",{staticClass:"btn",attrs:{type:"primary","native-type":"submit",round:""},on:{click:function(s){return s.preventDefault(),e.submit(s)}}},[e._v("登录")])],1)],1)],1)])},staticRenderFns:[]};var c=r("VU/8")(l,p,!1,function(e){r("F969")},"data-v-3ad0341f",null);s.default=c.exports}});
//# sourceMappingURL=11.2fca7382a65b2311bc35.js.map