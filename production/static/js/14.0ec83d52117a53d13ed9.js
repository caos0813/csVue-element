webpackJsonp([14],{Qz2r:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("0xDb"),s=r("bGai"),i={data:function(){var e=this;return{rules:{title:[{required:!0,validator:function(t,r,a){r?a():a(new Error("专题名称不能为空，且最多输入"+e.maxlength+"个字符"))},trigger:"blur"}]},params:{title:"",picture:"",introduction:"",isMore:!1}}},components:{upload:s.f,picker:s.e},computed:{maxlength:function(){var e=void 0;return e="6"===this.$route.query.moduleId?6:20,e}},methods:{selectChange:function(e){this.params.isMore=e},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;var r=e.params,s=r.title,i=r.picture,o=r.isMore,l=r.id,n=r.introduction,u=void 0;u="edit"===e.$route.params.type?e.params.module.id:e.$route.query.moduleId,e.$fly.post(a.a.saveSpecialTopicInfo,{id:l,title:s,picture:i,isMore:o,moduleId:u,introduction:n,status:1}).then(function(t){1e5===t.status?(e.$message({message:"保存成功",duration:2e3,type:"success"}),e.$refs.form.resetFields(),e.goBack()):e.$message({message:"保存失败",type:"error"})}).catch(function(){e.$message({message:"请求失败",duration:2e3,type:"error"})})})}},created:function(){var e=this,t=this.$route.params.type,r=this.$route.query.id;"edit"===t&&this.$fly.get(a.a.queryOneSpecialTopicInfo,{id:r}).then(function(t){1e5===t.status?e.params=t.data:e.$message({message:"查询失败",duration:2e3,type:"error"})})}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page"},[r("div",{staticClass:"tools-bar"},[r("div",{staticClass:"left-wrap"},[r("back")],1),e._v(" "),r("div",{staticClass:"button-wrap"},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("保存")])],1)]),e._v(" "),r("el-form",{ref:"form",attrs:{model:e.params,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"专题名称",prop:"title"}},[r("el-col",{attrs:{span:12}},[r("el-input",{attrs:{maxlength:e.maxlength},model:{value:e.params.title,callback:function(t){e.$set(e.params,"title",t)},expression:"params.title"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"封面",prop:"picture"}},[r("upload",{attrs:{width:"480",height:"255"},model:{value:e.params.picture,callback:function(t){e.$set(e.params,"picture",t)},expression:"params.picture"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"显示更多",prop:"isMore"}},[r("el-switch",{on:{change:e.selectChange},model:{value:e.params.isMore,callback:function(t){e.$set(e.params,"isMore",t)},expression:"params.isMore"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"简介",prop:"introduction"}},[r("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入简介"},model:{value:e.params.introduction,callback:function(t){e.$set(e.params,"introduction",t)},expression:"params.introduction"}})],1)],1)],1)},staticRenderFns:[]},l=r("VU/8")(i,o,!1,null,null,null);t.default=l.exports}});
//# sourceMappingURL=14.0ec83d52117a53d13ed9.js.map