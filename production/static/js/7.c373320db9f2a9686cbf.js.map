{"version":3,"sources":["webpack:///src/pages/zhiyuan/article/add.vue","webpack:///./src/pages/zhiyuan/article/add.vue?4b35","webpack:///./src/pages/zhiyuan/article/add.vue"],"names":["add","data","rules","title","required","message","trigger","tagVal","specialVal","path","type","content","params","isTag","image","introduction","tagData","specialData","typeData","id","label","timeDialog","addForm","publishTime","pickerOptions2","disabledDate","time","getTime","Date","now","formRules","moduleIds","components","upload","Tinymce","picker","methods","selectChange","e","this","typeChange","release","postData","utils","zhiyuan_articlePublishNow","timeRelease","_this","$refs","validate","valid","resetFields","save","zhiyuan_articlePublishDelay","cancel","submit","zhiyuan_articleHandle","refs","link","status","_this2","_params","console","log","moduleId","$route","releaseTime","$fly","post","specialTopicInfoId","fileType","videoFile","picture","then","$message","duration","goBack","catch","getArticleMajor","_this3","module","query","get","queryArticleInfoCondition","specialTopicInfoBean","created","_this4","_$route$query","zhiyuan_articleDetail","_data$data","specialTopicInfoTitle","articleInfoLabelId","_moduleId","_id","article_add","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","size","on","click","ref","model","label-width","label-suffix","prop","span","maxlength","value","callback","$$v","$set","expression","change","_e","placeholder","_l","item","index","key","name","ceil","$index","accept","width","height","rows","visible","close-on-click-modal","update:visible","$event","inline-message","picker-options","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"oKAkFAA,GACAC,KADA,WAEA,OACAC,OACAC,QAAAC,UAAA,EAAAC,QAAA,sBAAAC,QAAA,SACAC,SAAAH,UAAA,EAAAC,QAAA,UAAAC,QAAA,WACAE,aAAAJ,UAAA,EAAAC,QAAA,QAAAC,QAAA,WAEAG,OAAAC,KAAA,SAAAN,UAAA,EAAAC,QAAA,UAAAC,QAAA,SAEAK,UAAAP,UAAA,EAAAC,QAAA,QAAAC,QAAA,UAEAM,QACAT,MAAA,GACAU,OAAA,EACAN,OAAA,GACAC,WAAA,GACAE,KAAA,EACAD,KAAA,GACAK,MAAA,GACAC,aAAA,GACAJ,QAAA,IAEAK,WACAC,eACAC,WACAC,GAAA,EACAC,MAAA,QAEAD,GAAA,EACAC,MAAA,OAEAD,GAAA,EACAC,MAAA,OAEAC,YAAA,EACAC,SACAC,YAAA,IAEAC,gBACAC,aADA,SACAC,GACA,OAAAA,EAAAC,UAAAC,KAAAC,MAAA,QAGAC,WACAP,cAAAb,KAAA,OAAAN,UAAA,EAAAC,QAAA,SAAAC,QAAA,YAEAyB,UAAA,KAGAC,YACAC,OAAAD,EAAA,EACAE,UAAA,EACAC,OAAAH,EAAA,GAEAI,SACAC,aADA,SACAC,GACAC,KAAA3B,OAAAC,MAAAyB,GAEAE,WAJA,SAIAF,GACAC,KAAA3B,OAAAH,KAAA,IAGAgC,QARA,WASAF,KAAAG,SAAA,OAAAC,EAAA,EAAAC,0BAAA,IAEAC,YAXA,WAWA,IAAAC,EAAAP,KACAA,KAAAQ,MAAA,KAAAC,SAAA,SAAAC,GACAA,IACAH,EAAAzB,YAAA,EACAyB,EAAAC,MAAA,SACAD,EAAAC,MAAA,QAAAG,kBAMAC,KAtBA,WAuBAZ,KAAAG,SAAA,UAAAC,EAAA,EAAAS,4BAAA,IAEAC,OAzBA,WA0BAd,KAAAQ,MAAA,QAAAG,cACAX,KAAAlB,YAAA,GAGAiC,OA9BA,WA+BAf,KAAAG,SAAA,OAAAC,EAAA,EAAAY,sBAAA,IAEAb,SAjCA,SAiCAc,EAAAC,EAAAC,GAAA,IAAAC,EAAApB,KACAA,KAAAQ,MAAAS,GAAAR,SAAA,SAAAC,GACA,GAAAA,EAAA,KAAAW,EACAD,EAAA/C,OAAAO,EADAyC,EACAzC,GAAAhB,EADAyD,EACAzD,MAAAU,EADA+C,EACA/C,MAAAN,EADAqD,EACArD,OAAAC,EADAoD,EACApD,WAAAE,EADAkD,EACAlD,KAAAD,EADAmD,EACAnD,KAAAK,EADA8C,EACA9C,MAAAC,EADA6C,EACA7C,aAAAJ,EADAiD,EACAjD,QACAkD,QAAAC,IAAA3C,GACA,IAAA4C,OAAA,EAEAA,EADA,SAAAJ,EAAAK,OAAApD,OAAAF,KACAiD,EAAA/C,OAAAmD,SAEAJ,EAAA5B,UAEA,IAAAkC,EAAAN,EAAAtC,WAAA,IAAAO,KAAA+B,EAAArC,QAAAC,aAAAI,UAAA,KACAgC,EAAAO,KAAAC,KAAAV,GACAM,WACA5C,KACAhB,QACAiE,oBAAA,IAAAvD,EAAA,KAAAL,EACAY,OAAA,IAAAP,EAAAN,EAAA,KACA8D,SAAA3D,EACA4D,UAAA7D,EACA8D,QAAAzD,EACAH,UACAI,eACAkD,cACAP,WACAc,KAAA,SAAAvE,GACA,MAAAA,EAAAyD,QACAC,EAAAc,UACApE,QAAA,OACAqE,SAAA,IACAhE,KAAA,YAEAiD,EAAAZ,MAAA,KAAAG,cACAS,EAAAtC,YAAA,EACAsC,EAAAgB,UAEAhB,EAAAc,UACApE,QAAA,OACAK,KAAA,YAGAkE,MAAA,WACAjB,EAAAc,UACApE,QAAA,OACAqE,SAAA,IACAhE,KAAA,gBAMAmE,gBApFA,WAoFA,IAAAC,EAAAvC,KACAwC,OAAA,EAEAA,EADA,SAAAxC,KAAAyB,OAAApD,OAAAF,KACA6B,KAAA3B,OAAAmD,SAEAxB,KAAAyB,OAAAgB,MAAAjB,SAEAxB,KAAA2B,KAAAe,IAAAtC,EAAA,EAAAuC,2BAAAnB,SAAAgB,IAAAP,KAAA,SAAAvE,GAAA,IACAmB,EAAAnB,EAAAmB,MAAA+D,EAAAlF,EAAAkF,qBACAL,EAAA9D,QAAAI,EACA0D,EAAA7D,YAAAkE,IACAP,MAAA,WACAE,EAAAL,UACApE,QAAA,OACAqE,SAAA,IACAhE,KAAA,cAKA0E,QA/JA,WA+JA,IAAAC,EAAA9C,KACA7B,EAAA6B,KAAAyB,OAAApD,OAAAF,KADA4E,EAEA/C,KAAAyB,OAAAgB,MAAA7D,EAFAmE,EAEAnE,GAAA4C,EAFAuB,EAEAvB,SACAxB,KAAAR,UAAAgC,EACA,SAAArD,EACA6B,KAAA2B,KAAAe,IAAAtC,EAAA,EAAA4C,uBACApE,OACAqD,KAAA,SAAAvE,GACA,SAAAA,EAAAyD,OAAA,KAAA8B,EACAvF,OAAAoE,EADAmB,EACAnB,SAAAC,EADAkB,EACAlB,UAAAC,EADAiB,EACAjB,QAAAkB,EADAD,EACAC,sBAAAC,EADAF,EACAE,mBAAAtB,EADAoB,EACApB,mBAAAzD,EADA6E,EACA7E,QAAAR,EADAqF,EACArF,MAAAY,EADAyE,EACAzE,aAAA4E,EADAH,EACAzB,SAAA6B,EADAJ,EACArE,GACAkE,EAAAzE,OAAAT,QACAkF,EAAAzE,OAAAD,UACA0E,EAAAzE,OAAAG,eACAsE,EAAAzE,OAAAF,KAAA2D,EACAgB,EAAAzE,OAAAH,KAAA6D,EACAe,EAAAzE,OAAAE,MAAAyD,EACAc,EAAAzE,OAAAmD,SAAA4B,EACAN,EAAAzE,OAAAO,GAAAyE,EACA,OAAAH,GACAJ,EAAAzE,OAAAC,OAAA,EACAwE,EAAAzE,OAAAL,OAAAmF,IAEAL,EAAAzE,OAAAC,OAAA,EACAwE,EAAAzE,OAAAJ,WAAA4D,GAEAiB,EAAAR,uBAEAQ,EAAAZ,UACApE,QAAA,OACAqE,SAAA,IACAhE,KAAA,YAGAkE,MAAA,WACAS,EAAAZ,UACApE,QAAA,OACAqE,SAAA,IACAhE,KAAA,YAIA6B,KAAAsC,oBCvRegB,GADEC,OAFjB,WAA0B,IAAAC,EAAAxD,KAAayD,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,SAAmBF,EAAA,OAAYE,YAAA,cAAwBF,EAAA,OAAYE,YAAA,cAAwBF,EAAA,YAAAH,EAAAM,GAAA,KAAAH,EAAA,OAAuCE,YAAA,gBAA0BF,EAAA,aAAkBI,OAAO5F,KAAA,UAAA6F,KAAA,SAAgCC,IAAKC,MAAAV,EAAAtD,WAAqBsD,EAAAM,GAAA,UAAAN,EAAAM,GAAA,KAAAH,EAAA,aAA+CI,OAAO5F,KAAA,OAAA6F,KAAA,SAA6BC,IAAKC,MAAAV,EAAAlD,eAAyBkD,EAAAM,GAAA,UAAAN,EAAAM,GAAA,KAAAH,EAAA,aAA+CI,OAAO5F,KAAA,UAAA6F,KAAA,SAAgCC,IAAKC,MAAAV,EAAAzC,UAAoByC,EAAAM,GAAA,cAAAN,EAAAM,GAAA,KAAAH,EAAA,WAAiDQ,IAAA,OAAAJ,OAAkBK,MAAAZ,EAAAnF,OAAAV,MAAA6F,EAAA7F,MAAA0G,cAAA,OAAAC,eAAA,OAA8EX,EAAA,gBAAqBI,OAAOlF,MAAA,KAAA0F,KAAA,WAA6BZ,EAAA,UAAeI,OAAOS,KAAA,MAAWb,EAAA,YAAiBI,OAAOU,UAAA,MAAiBL,OAAQM,MAAAlB,EAAAnF,OAAA,MAAAsG,SAAA,SAAAC,GAAkDpB,EAAAqB,KAAArB,EAAAnF,OAAA,QAAAuG,IAAmCE,WAAA,mBAA4B,OAAAtB,EAAAM,GAAA,SAAAN,EAAAhC,SAAAmC,EAAA,gBAA8DI,OAAOlF,MAAA,OAAA0F,KAAA,WAA+BZ,EAAA,UAAeI,OAAOS,KAAA,KAAUb,EAAA,aAAkBM,IAAIc,OAAAvB,EAAA1D,cAA0BsE,OAAQM,MAAAlB,EAAAnF,OAAA,MAAAsG,SAAA,SAAAC,GAAkDpB,EAAAqB,KAAArB,EAAAnF,OAAA,QAAAuG,IAAmCE,WAAA,mBAA4B,OAAAtB,EAAAwB,KAAAxB,EAAAM,GAAA,KAAAN,EAAAnF,OAAA,MAAAsF,EAAA,gBAAqEI,OAAOlF,MAAA,OAAA0F,KAAA,YAAgCZ,EAAA,UAAeI,OAAOS,KAAA,KAAUb,EAAA,aAAkBE,YAAA,OAAAE,OAA0BkB,YAAA,SAAsBb,OAAQM,MAAAlB,EAAAnF,OAAA,OAAAsG,SAAA,SAAAC,GAAmDpB,EAAAqB,KAAArB,EAAAnF,OAAA,SAAAuG,IAAoCE,WAAA,kBAA6BtB,EAAA0B,GAAA1B,EAAA,iBAAA2B,EAAAC,GAA2C,OAAAzB,EAAA,aAAuB0B,IAAAD,EAAArB,OAAiBlF,MAAAsG,EAAAG,KAAAZ,MAAAS,EAAAvG,UAAqC,OAAA+E,EAAA,gBAA8BI,OAAOlF,MAAA,KAAA0F,KAAA,gBAAkCZ,EAAA,UAAeI,OAAOS,KAAA,KAAUb,EAAA,aAAkBE,YAAA,OAAAE,OAA0BkB,YAAA,SAAsBb,OAAQM,MAAAlB,EAAAnF,OAAA,WAAAsG,SAAA,SAAAC,GAAuDpB,EAAAqB,KAAArB,EAAAnF,OAAA,aAAAuG,IAAwCE,WAAA,sBAAiCtB,EAAA0B,GAAA1B,EAAA,qBAAA2B,EAAAC,GAA+C,OAAAzB,EAAA,aAAuB0B,IAAAD,EAAArB,OAAiBlF,MAAAsG,EAAAvH,MAAA8G,MAAAS,EAAAvG,UAAsC,OAAA4E,EAAAM,GAAA,KAAAH,EAAA,gBAA0CI,OAAOlF,MAAA,KAAA0F,KAAA,UAA4BZ,EAAA,UAAeI,OAAOS,KAAA,KAAUb,EAAA,aAAkBE,YAAA,OAAAE,OAA0BkB,YAAA,QAAAjB,KAAA,SAAqCC,IAAKc,OAAAvB,EAAAvD,YAAwBmE,OAAQM,MAAAlB,EAAAnF,OAAA,KAAAsG,SAAA,SAAAC,GAAiDpB,EAAAqB,KAAArB,EAAAnF,OAAA,OAAAuG,IAAkCE,WAAA,gBAA2BtB,EAAA0B,GAAA1B,EAAA,kBAAA+B,EAAAC,GAA6C,OAAA7B,EAAA,aAAuB0B,IAAAG,EAAAzB,OAAkBlF,MAAA0G,EAAA1G,MAAA6F,MAAAa,EAAA3G,UAAsC,OAAA4E,EAAAM,GAAA,SAAAN,EAAAnF,OAAAF,KAAAwF,EAAA,gBAAgEI,OAAOlF,MAAA,KAAA0F,KAAA,UAA4B,IAAAf,EAAAnF,OAAAF,KAAAwF,EAAA,UAAqCI,OAAO5F,KAAA,QAAAsH,OAAA,UAAAvH,KAAA,kBAA0DkG,OAAQM,MAAAlB,EAAAnF,OAAA,KAAAsG,SAAA,SAAAC,GAAiDpB,EAAAqB,KAAArB,EAAAnF,OAAA,OAAAuG,IAAkCE,WAAA,iBAA2BtB,EAAAwB,KAAAxB,EAAAM,GAAA,SAAAN,EAAAnF,OAAAF,KAAAwF,EAAA,UAA0DI,OAAO5F,KAAA,QAAAsH,OAAA,UAAAvH,KAAA,kBAA0DkG,OAAQM,MAAAlB,EAAAnF,OAAA,KAAAsG,SAAA,SAAAC,GAAiDpB,EAAAqB,KAAArB,EAAAnF,OAAA,OAAAuG,IAAkCE,WAAA,iBAA2BtB,EAAAwB,MAAA,GAAAxB,EAAAwB,KAAAxB,EAAAM,GAAA,KAAAH,EAAA,gBAAuDI,OAAOlF,MAAA,KAAA0F,KAAA,WAA6BZ,EAAA,UAAeI,OAAO7F,KAAA,iBAAAwH,MAAA,OAAAC,OAAA,OAAsDvB,OAAQM,MAAAlB,EAAAnF,OAAA,MAAAsG,SAAA,SAAAC,GAAkDpB,EAAAqB,KAAArB,EAAAnF,OAAA,QAAAuG,IAAmCE,WAAA,mBAA4B,GAAAtB,EAAAM,GAAA,KAAAH,EAAA,gBAAqCI,OAAOlF,MAAA,KAAA0F,KAAA,kBAAoCZ,EAAA,YAAiBI,OAAO5F,KAAA,WAAAyH,KAAA,EAAAX,YAAA,SAAiDb,OAAQM,MAAAlB,EAAAnF,OAAA,aAAAsG,SAAA,SAAAC,GAAyDpB,EAAAqB,KAAArB,EAAAnF,OAAA,eAAAuG,IAA0CE,WAAA,0BAAmC,GAAAtB,EAAAM,GAAA,KAAAH,EAAA,gBAAqCI,OAAOQ,KAAA,aAAkBZ,EAAA,UAAeI,OAAOS,KAAA,MAAWb,EAAA,WAAgBQ,IAAA,SAAAJ,OAAoB4B,OAAA,KAAavB,OAAQM,MAAAlB,EAAAnF,OAAA,QAAAsG,SAAA,SAAAC,GAAoDpB,EAAAqB,KAAArB,EAAAnF,OAAA,UAAAuG,IAAqCE,WAAA,qBAA8B,WAAAtB,EAAAM,GAAA,KAAAH,EAAA,aAA0CI,OAAOnG,MAAA,OAAAiI,QAAArC,EAAA1E,WAAA4G,MAAA,QAAAI,wBAAA,GAAqF7B,IAAK8B,iBAAA,SAAAC,GAAkCxC,EAAA1E,WAAAkH,MAAwBrC,EAAA,WAAgBQ,IAAA,UAAAJ,OAAqBK,MAAAZ,EAAAzE,QAAAkH,iBAAA,GAAAtI,MAAA6F,EAAAjE,UAAA+E,eAAA,IAAAD,cAAA,SAAsGV,EAAA,gBAAqBI,OAAOlF,MAAA,OAAA0F,KAAA,iBAAqCZ,EAAA,UAAeI,OAAOS,KAAA,MAAWb,EAAA,kBAAuBE,YAAA,OAAAE,OAA0B5F,KAAA,WAAA+H,iBAAA1C,EAAAvE,eAAAgG,YAAA,WAA8Eb,OAAQM,MAAAlB,EAAAzE,QAAA,YAAA4F,SAAA,SAAAC,GAAyDpB,EAAAqB,KAAArB,EAAAzE,QAAA,cAAA6F,IAA0CE,WAAA,0BAAmC,WAAAtB,EAAAM,GAAA,KAAAH,EAAA,QAAqCE,YAAA,gBAAAE,OAAmCoC,KAAA,UAAgBA,KAAA,WAAexC,EAAA,aAAkBM,IAAIC,MAAAV,EAAA1C,UAAoB0C,EAAAM,GAAA,QAAAN,EAAAM,GAAA,KAAAH,EAAA,aAA6CI,OAAO5F,KAAA,WAAiB8F,IAAKC,MAAAV,EAAA5C,QAAkB4C,EAAAM,GAAA,qBAEj1JsC,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE9I,EACA6F,GATF,EAVA,SAAAkD,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/7.c373320db9f2a9686cbf.js","sourcesContent":["<template>\r\n  <div class=\"page\">\r\n    <div class=\"tools-bar\">\r\n      <div class=\"left-wrap\">\r\n        <back></back>\r\n      </div>\r\n      <div class=\"button-wrap\">\r\n        <el-button type=\"primary\" size=\"small\" @click=\"release\">直接发布</el-button>\r\n        <el-button type=\"info\" size=\"small\" @click=\"timeRelease\">定时发布</el-button>\r\n        <el-button type=\"warning\" size=\"small\" @click=\"submit\">草稿</el-button>\r\n      </div>\r\n    </div>\r\n    <el-form ref=\"form\" :model=\"params\" :rules=\"rules\" label-width=\"90px\" label-suffix=\":\">\r\n      <el-form-item label=\"标题\" prop=\"title\">\r\n        <el-col :span='12'>\r\n          <el-input v-model=\"params.title\" maxlength=\"20\"></el-input>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item label=\"文章标签\" v-if=\"moduleId !== 6\" prop=\"isTag\">\r\n        <el-col :span=\"6\">\r\n          <el-switch v-model=\"params.isTag\" @change=\"selectChange\"></el-switch>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item label=\"文章标签\" prop=\"tagVal\" v-if=\"params.isTag\">\r\n        <el-col :span=\"6\">\r\n          <el-select v-model=\"params.tagVal\" placeholder=\"请选择标签\" class=\"full\">\r\n            <el-option v-for=\"(item,index) in tagData\" :key=\"index\" :label=\"item.name\" :value=\"item.id\r\n          \"></el-option>\r\n          </el-select>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item label=\"专题\" prop=\"specialVal\" v-else>\r\n        <el-col :span=\"6\">\r\n          <el-select v-model=\"params.specialVal\" placeholder=\"请选择专题\" class=\"full\">\r\n            <el-option v-for=\"(item,index) in specialData\" :key=\"index\" :label=\"item.title\" :value=\"item.id\r\n          \"></el-option>\r\n          </el-select>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item label=\"类型\" prop=\"type\">\r\n        <el-col :span=\"6\">\r\n          <el-select v-model=\"params.type\" placeholder=\"请选择类型\" class=\"full\" @change=\"typeChange\" size=\"small\">\r\n            <el-option :label=\"ceil.label\" :value=\"ceil.id\" v-for=\"(ceil,$index) in typeData\" :key=\"$index\"></el-option>\r\n          </el-select>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item label=\"文件\" prop=\"path\" v-if=\"params.type!==0\">\r\n        <upload v-model=\"params.path\" type=\"audio\" accept=\"audio/*\" path=\"audio/article/\" v-if=\"params.type===1\"></upload>\r\n        <upload v-model=\"params.path\" type=\"video\" accept=\"video/*\" path=\"video/article/\" v-if=\"params.type===2\"></upload>\r\n      </el-form-item>\r\n      <el-form-item label=\"封面\" prop=\"image\">\r\n        <upload v-model=\"params.image\" path=\"image/article/\" width=\"1125\" height=\"750\"></upload>\r\n      </el-form-item>\r\n      <el-form-item label=\"简介\" prop=\"introduction\">\r\n        <el-input type=\"textarea\" :rows=\"5\" placeholder=\"请输入简介\" v-model=\"params.introduction\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"content\">\r\n        <el-col :span=\"18\">\r\n          <Tinymce :height=\"600\" ref=\"editor\" v-model=\"params.content\" />\r\n        </el-col>\r\n      </el-form-item>\r\n    </el-form>\r\n    <el-dialog title=\"定时发布\" :visible.sync=\"timeDialog\" width=\"500px\" :close-on-click-modal=\"false\">\r\n      <el-form :model=\"addForm\" inline-message ref=\"addForm\" :rules=\"formRules\" label-suffix=\":\" label-width=\"100\">\r\n        <el-form-item label=\"发布时间\" prop=\"publishTime\">\r\n          <el-col :span='12'>\r\n            <el-date-picker v-model=\"addForm.publishTime\" type=\"datetime\" :picker-options=\"pickerOptions2\" placeholder=\"请选择发布时间\" class=\"full\">\r\n            </el-date-picker>\r\n          </el-col>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"cancel\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"save\">确定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Tinymce from '@/components/Tinymce'\r\nimport { api } from '@/utils'\r\nimport { upload, picker } from '@/components'\r\nexport default {\r\n  data () {\r\n    return {\r\n      rules: {\r\n        title: [{ required: true, message: '文章标题不能为空，且最多输入20个字符', trigger: 'blur' }],\r\n        tagVal: [{ required: true, message: '请选择文章标签', trigger: 'change' }],\r\n        specialVal: [{ required: true, message: '请选择专题', trigger: 'change' }],\r\n        // type: [{ required: true, message: '请选择文件类型', trigger: 'change' }],\r\n        path: [{ type: 'string', required: true, message: '请上传类型文件', trigger: 'blur' }],\r\n        // image: [{ type: 'string', required: true, message: '请上传封面', trigger: 'blur' }],\r\n        content: [{ required: true, message: '请输入内容', trigger: 'blur' }]\r\n      },\r\n      params: {\r\n        title: '',\r\n        isTag: false,\r\n        tagVal: '',\r\n        specialVal: '',\r\n        type: 0,\r\n        path: '',\r\n        image: '',\r\n        introduction: '',\r\n        content: ''\r\n      },\r\n      tagData: [],\r\n      specialData: [],\r\n      typeData: [{\r\n        id: 0,\r\n        label: '纯文本'\r\n      }, {\r\n        id: 1,\r\n        label: '音频'\r\n      }, {\r\n        id: 2,\r\n        label: '视频'\r\n      }],\r\n      timeDialog: false,\r\n      addForm: {\r\n        publishTime: ''\r\n      },\r\n      pickerOptions2: {\r\n        disabledDate (time) {\r\n          return time.getTime() < Date.now() - 8.64e7\r\n        }\r\n      },\r\n      formRules: {\r\n        publishTime: [{ type: 'date', required: true, message: '时间不能为空', trigger: 'change' }]\r\n      },\r\n      moduleIds: ''\r\n    }\r\n  },\r\n  components: {\r\n    upload,\r\n    Tinymce,\r\n    picker\r\n  },\r\n  methods: {\r\n    selectChange (e) {\r\n      this.params.isTag = e\r\n    },\r\n    typeChange (e) {\r\n      this.params.path = ''\r\n    },\r\n    // 直接发布\r\n    release () {\r\n      this.postData('form', api.zhiyuan_articlePublishNow, 1)\r\n    },\r\n    timeRelease () {\r\n      this.$refs['form'].validate((valid) => {\r\n        if (valid) {\r\n          this.timeDialog = true\r\n          if (this.$refs['addForm']) {\r\n            this.$refs['addForm'].resetFields()\r\n          }\r\n        }\r\n      })\r\n    },\r\n    // 定时发布\r\n    save () {\r\n      this.postData('addForm', api.zhiyuan_articlePublishDelay, 4)\r\n    },\r\n    cancel () {\r\n      this.$refs['addForm'].resetFields()\r\n      this.timeDialog = false\r\n    },\r\n    // 保存为草稿\r\n    submit () {\r\n      this.postData('form', api.zhiyuan_articleHandle, 2)\r\n    },\r\n    postData (refs, link, status) {\r\n      this.$refs[refs].validate((valid) => {\r\n        if (valid) {\r\n          let { id, title, isTag, tagVal, specialVal, type, path, image, introduction, content } = this.params\r\n          console.log(id)\r\n          let moduleId\r\n          if (this.$route.params.type === 'edit') {\r\n            moduleId = this.params.moduleId\r\n          } else {\r\n            moduleId = this.moduleIds\r\n          }\r\n          let releaseTime = this.timeDialog ? new Date(this.addForm.publishTime).getTime() : null\r\n          this.$fly.post(link, {\r\n            moduleId: moduleId,\r\n            id,\r\n            title,\r\n            specialTopicInfoId: isTag === true ? null : specialVal,\r\n            label: isTag === true ? tagVal : null,\r\n            fileType: type,\r\n            videoFile: path,\r\n            picture: image,\r\n            content,\r\n            introduction,\r\n            releaseTime: releaseTime,\r\n            status: status\r\n          }).then(data => {\r\n            if (data.status === 100000) {\r\n              this.$message({\r\n                message: '保存成功',\r\n                duration: 2000,\r\n                type: 'success'\r\n              })\r\n              this.$refs['form'].resetFields()\r\n              this.timeDialog = false\r\n              this.goBack()\r\n            } else {\r\n              this.$message({\r\n                message: '保存失败',\r\n                type: 'error'\r\n              })\r\n            }\r\n          }).catch(() => {\r\n            this.$message({\r\n              message: '请求失败',\r\n              duration: 2000,\r\n              type: 'error'\r\n            })\r\n          })\r\n        }\r\n      })\r\n    },\r\n    getArticleMajor () {\r\n      let module\r\n      if (this.$route.params.type === 'edit') {\r\n        module = this.params.moduleId\r\n      } else {\r\n        module = this.$route.query.moduleId\r\n      }\r\n      this.$fly.get(api.queryArticleInfoCondition, { moduleId: module }).then(data => {\r\n        let { label, specialTopicInfoBean } = data\r\n        this.tagData = label\r\n        this.specialData = specialTopicInfoBean\r\n      }).catch(() => {\r\n        this.$message({\r\n          message: '请求失败',\r\n          duration: 2000,\r\n          type: 'error'\r\n        })\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    let { type } = this.$route.params\r\n    let { id, moduleId } = this.$route.query\r\n    this.moduleIds = moduleId\r\n    if (type === 'edit') {\r\n      this.$fly.get(api.zhiyuan_articleDetail, {\r\n        id\r\n      }).then(data => {\r\n        if (data.status === 100000) {\r\n          let { fileType, videoFile, picture, specialTopicInfoTitle, articleInfoLabelId, specialTopicInfoId, content, title, introduction, moduleId, id } = data.data\r\n          this.params.title = title\r\n          this.params.content = content\r\n          this.params.introduction = introduction\r\n          this.params.type = fileType\r\n          this.params.path = videoFile\r\n          this.params.image = picture\r\n          this.params.moduleId = moduleId\r\n          this.params.id = id\r\n          if (specialTopicInfoTitle === null) {\r\n            this.params.isTag = true\r\n            this.params.tagVal = articleInfoLabelId\r\n          } else {\r\n            this.params.isTag = false\r\n            this.params.specialVal = specialTopicInfoId\r\n          }\r\n          this.getArticleMajor()\r\n        } else {\r\n          this.$message({\r\n            message: '查询失败',\r\n            duration: 2000,\r\n            type: 'error'\r\n          })\r\n        }\r\n      }).catch(() => {\r\n        this.$message({\r\n          message: '请求失败',\r\n          duration: 2000,\r\n          type: 'error'\r\n        })\r\n      })\r\n    } else {\r\n      this.getArticleMajor()\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/zhiyuan/article/add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\"},[_c('div',{staticClass:\"tools-bar\"},[_c('div',{staticClass:\"left-wrap\"},[_c('back')],1),_vm._v(\" \"),_c('div',{staticClass:\"button-wrap\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.release}},[_vm._v(\"直接发布\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\",\"size\":\"small\"},on:{\"click\":_vm.timeRelease}},[_vm._v(\"定时发布\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"warning\",\"size\":\"small\"},on:{\"click\":_vm.submit}},[_vm._v(\"草稿\")])],1)]),_vm._v(\" \"),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.params,\"rules\":_vm.rules,\"label-width\":\"90px\",\"label-suffix\":\":\"}},[_c('el-form-item',{attrs:{\"label\":\"标题\",\"prop\":\"title\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-input',{attrs:{\"maxlength\":\"20\"},model:{value:(_vm.params.title),callback:function ($$v) {_vm.$set(_vm.params, \"title\", $$v)},expression:\"params.title\"}})],1)],1),_vm._v(\" \"),(_vm.moduleId !== 6)?_c('el-form-item',{attrs:{\"label\":\"文章标签\",\"prop\":\"isTag\"}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-switch',{on:{\"change\":_vm.selectChange},model:{value:(_vm.params.isTag),callback:function ($$v) {_vm.$set(_vm.params, \"isTag\", $$v)},expression:\"params.isTag\"}})],1)],1):_vm._e(),_vm._v(\" \"),(_vm.params.isTag)?_c('el-form-item',{attrs:{\"label\":\"文章标签\",\"prop\":\"tagVal\"}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-select',{staticClass:\"full\",attrs:{\"placeholder\":\"请选择标签\"},model:{value:(_vm.params.tagVal),callback:function ($$v) {_vm.$set(_vm.params, \"tagVal\", $$v)},expression:\"params.tagVal\"}},_vm._l((_vm.tagData),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.name,\"value\":item.id}})}))],1)],1):_c('el-form-item',{attrs:{\"label\":\"专题\",\"prop\":\"specialVal\"}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-select',{staticClass:\"full\",attrs:{\"placeholder\":\"请选择专题\"},model:{value:(_vm.params.specialVal),callback:function ($$v) {_vm.$set(_vm.params, \"specialVal\", $$v)},expression:\"params.specialVal\"}},_vm._l((_vm.specialData),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.title,\"value\":item.id}})}))],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"类型\",\"prop\":\"type\"}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-select',{staticClass:\"full\",attrs:{\"placeholder\":\"请选择类型\",\"size\":\"small\"},on:{\"change\":_vm.typeChange},model:{value:(_vm.params.type),callback:function ($$v) {_vm.$set(_vm.params, \"type\", $$v)},expression:\"params.type\"}},_vm._l((_vm.typeData),function(ceil,$index){return _c('el-option',{key:$index,attrs:{\"label\":ceil.label,\"value\":ceil.id}})}))],1)],1),_vm._v(\" \"),(_vm.params.type!==0)?_c('el-form-item',{attrs:{\"label\":\"文件\",\"prop\":\"path\"}},[(_vm.params.type===1)?_c('upload',{attrs:{\"type\":\"audio\",\"accept\":\"audio/*\",\"path\":\"audio/article/\"},model:{value:(_vm.params.path),callback:function ($$v) {_vm.$set(_vm.params, \"path\", $$v)},expression:\"params.path\"}}):_vm._e(),_vm._v(\" \"),(_vm.params.type===2)?_c('upload',{attrs:{\"type\":\"video\",\"accept\":\"video/*\",\"path\":\"video/article/\"},model:{value:(_vm.params.path),callback:function ($$v) {_vm.$set(_vm.params, \"path\", $$v)},expression:\"params.path\"}}):_vm._e()],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"封面\",\"prop\":\"image\"}},[_c('upload',{attrs:{\"path\":\"image/article/\",\"width\":\"1125\",\"height\":\"750\"},model:{value:(_vm.params.image),callback:function ($$v) {_vm.$set(_vm.params, \"image\", $$v)},expression:\"params.image\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"简介\",\"prop\":\"introduction\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":5,\"placeholder\":\"请输入简介\"},model:{value:(_vm.params.introduction),callback:function ($$v) {_vm.$set(_vm.params, \"introduction\", $$v)},expression:\"params.introduction\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"content\"}},[_c('el-col',{attrs:{\"span\":18}},[_c('Tinymce',{ref:\"editor\",attrs:{\"height\":600},model:{value:(_vm.params.content),callback:function ($$v) {_vm.$set(_vm.params, \"content\", $$v)},expression:\"params.content\"}})],1)],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"定时发布\",\"visible\":_vm.timeDialog,\"width\":\"500px\",\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.timeDialog=$event}}},[_c('el-form',{ref:\"addForm\",attrs:{\"model\":_vm.addForm,\"inline-message\":\"\",\"rules\":_vm.formRules,\"label-suffix\":\":\",\"label-width\":\"100\"}},[_c('el-form-item',{attrs:{\"label\":\"发布时间\",\"prop\":\"publishTime\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-date-picker',{staticClass:\"full\",attrs:{\"type\":\"datetime\",\"picker-options\":_vm.pickerOptions2,\"placeholder\":\"请选择发布时间\"},model:{value:(_vm.addForm.publishTime),callback:function ($$v) {_vm.$set(_vm.addForm, \"publishTime\", $$v)},expression:\"addForm.publishTime\"}})],1)],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"确定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-50bd44ae\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/zhiyuan/article/add.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-50bd44ae\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!sass-resources-loader?{\\\"resources\\\":\\\"D:\\\\\\\\work\\\\\\\\junyang_admin\\\\\\\\src\\\\\\\\assets\\\\\\\\sass\\\\\\\\var.scss\\\"}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./add.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-50bd44ae\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-50bd44ae\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/zhiyuan/article/add.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}