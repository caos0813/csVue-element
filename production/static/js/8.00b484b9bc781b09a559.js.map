{"version":3,"sources":["webpack:///src/pages/volunteer/card.vue","webpack:///./src/pages/volunteer/card.vue?63e0","webpack:///./src/pages/volunteer/card.vue"],"names":["card","data","date","pickerOptions2","disabledDate","time","getTime","Date","now","shortcuts","text","onClick","picker","$emit","end","start","setTime","searchName","tableData","pageInfo","totalElements","currentPage","loading","addDialog","addForm","province","number","type","cardLoading","provinceArr","rules","required","message","trigger","validator","rule","value","callback","Error","test","computed","params","page","beginDate","this","endDate","components","listHandle","pagination","methods","dateChange","e","beginTime","endTime","getFullYear","getMonth","getDate","getData","size","limit","handlerExprot","id","token","js_cookie_default","a","get","JSON","parse","window","location","href","$fly","config","baseURL","utils","exportByRecordId","openCard","getProvinces","$refs","resetFields","save","_this","count","provinceId","validate","valid","post","generate","then","$message","catch","resetForm","_this2","status","provinces","err","console","log","_this3","byCondition","content","parseInt","created","mounted","pageSizes","volunteer_card","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","unlink-panels","range-separator","start-placeholder","end-placeholder","picker-options","value-format","on","change","model","$$v","expression","_v","click","directives","name","rawName","header-cell-style","background","element-loading-text","border","stripe","width","align","prop","label","scopedSlots","_u","key","fn","props","_s","row","_f","createdDate","scope","$event","ref","total","update:page","$set","title","visible","close-on-click-modal","update:visible","inline-message","label-suffix","label-width","placeholder","_l","item","staticStyle","controls-position","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"wJAsEAA,GACAC,KADA,WAEA,OACAC,KAAA,KACAC,gBACAC,aADA,SACAC,GACA,OAAAA,EAAAC,UAAAC,KAAAC,OAEAC,YACAC,KAAA,KACAC,QAFA,SAEAC,GACAA,EAAAC,MAAA,YAAAN,KAAA,IAAAA,UAGAG,KAAA,OACAC,QAFA,SAEAC,GACA,IAAAE,EAAA,IAAAP,KACAQ,EAAA,IAAAR,KACAQ,EAAAC,QAAAD,EAAAT,UAAA,QACAM,EAAAC,MAAA,QAAAE,EAAAD,OAGAJ,KAAA,QACAC,QAFA,SAEAC,GACA,IAAAE,EAAA,IAAAP,KACAQ,EAAA,IAAAR,KACAQ,EAAAC,QAAAD,EAAAT,UAAA,QACAM,EAAAC,MAAA,QAAAE,EAAAD,OAGAJ,KAAA,QACAC,QAFA,SAEAC,GACA,IAAAE,EAAA,IAAAP,KACAQ,EAAA,IAAAR,KACAQ,EAAAC,QAAAD,EAAAT,UAAA,QACAM,EAAAC,MAAA,QAAAE,EAAAD,QAIAG,WAAA,GACAC,aACAC,UACAC,cAAA,EACAC,YAAA,GAEAC,SAAA,EACAC,WAAA,EACAC,SACAC,SAAA,GACAC,OAAA,EACAC,KAAA,iBAEAC,aAAA,EACAC,eACAC,OACAL,WACAM,UAAA,EACAC,QAAA,SACAC,QAAA,WAEAC,UAAA,SAAAC,EAAAC,EAAAC,GACA,SAAAD,EACA,OAAAC,EAAA,IAAAC,MAAA,UAEAD,KAGAJ,QAAA,WAEAP,SACAC,KAAA,SAAAI,UAAA,EAAAC,QAAA,SAAAC,QAAA,SAEAC,UAAA,SAAAC,EAAAC,EAAAC,GACA,iBAAAE,KAAAH,GACA,OAAAC,EAAA,IAAAC,MAAA,iBAEAD,KAGAJ,QAAA,SAGAN,OACAI,UAAA,EAAAC,QAAA,SAAAC,QAAA,cAKAO,UACAC,OADA,WAEA,OACAC,KAAA,EAEAC,UAAAC,KAAA1C,KAAA0C,KAAA1C,KAAA,QACA2C,QAAAD,KAAA1C,KAAA0C,KAAA1C,KAAA,WAIA4C,YACAC,WAAAD,EAAA,EACAE,WAAAF,EAAA,GAEAG,SACAC,WADA,SACAC,GACA,IAAAC,EAAA,IAAA7C,KAAA4C,EAAA,IACAE,EAAA,IAAA9C,KAAA4C,EAAA,IACAA,EAAA,OAAA5C,KAAA6C,EAAAE,cAAA,KAAAF,EAAAG,WAAA,OAAAH,EAAAI,UAAA,aAAAlD,UACA6C,EAAA,OAAA5C,KAAA8C,EAAAC,cAAA,KAAAD,EAAAE,WAAA,OAAAF,EAAAG,UAAA,aAAAlD,UACAsC,KAAAH,OAAAE,UAAAQ,EAAA,GACAP,KAAAH,OAAAI,QAAAM,EAAA,GACAP,KAAAa,QAAAb,KAAAH,SAGAO,WAXA,SAWAG,GACAP,KAAAH,OAAAC,KAAAS,EAAAT,KACAE,KAAAH,OAAAiB,KAAAP,EAAAQ,MACAf,KAAAa,QAAAb,KAAAH,SAGAmB,cAjBA,SAiBAC,GAAA,IACAC,GAAAC,EAAAC,EAAAC,IAAA,QAAAC,KAAAC,MAAAJ,EAAAC,EAAAC,IAAA,aAAAH,MACAM,OAAAC,SAAAC,KAAA1B,KAAA2B,KAAAC,OAAAC,QAAAC,EAAA,EAAAC,iBAAA,IAAAd,EAAA,UAAAC,GAGAc,SAtBA,WAuBAhC,KAAArB,WAAA,EACAqB,KAAAiC,eACAjC,KAAAkC,MAAA,SACAlC,KAAAkC,MAAA,QAAAC,eAIAC,KA9BA,WA8BA,IAAAC,EAAArC,KACAH,GACAyC,MAAAtC,KAAApB,QAAAE,OACAyD,WAAAvC,KAAApB,QAAAC,SACAE,KAAAiB,KAAApB,QAAAG,MAEAiB,KAAAkC,MAAA,QAAAM,SAAA,SAAAC,GACAA,IACAJ,EAAArD,aAAA,EACAqD,EAAAV,KAAAe,KAAAZ,EAAA,EAAAa,SAAA9C,GAAA+C,KAAA,SAAAvF,GACAgF,EAAArD,aAAA,EACAqD,EAAAQ,UACAzD,QAAA,QACAL,KAAA,YAEAsD,EAAAxB,QAAAwB,EAAAxC,QACAwC,EAAA1D,WAAA,IACAmE,MAAA,WACAT,EAAAQ,UACAzD,QAAA,OACAL,KAAA,gBAOAgE,UAzDA,WA0DA/C,KAAAkC,MAAA,QAAAC,eAGAF,aA7DA,WA6DA,IAAAe,EAAAhD,KACAA,KAAA2B,KAAAN,IAAAS,EAAA,EAAAG,cAAAW,KAAA,SAAAvF,GAGA,SAAAA,EAAA4F,OAAA,CACA,IAAAC,EAAA7F,OACA2F,EAAA/D,YAAAiE,OAEAF,EAAAH,UACAzD,QAAA,OACAL,KAAA,YAGA+D,MAAA,SAAAK,GACAC,QAAAC,IAAAF,MAGAtC,QA9EA,SA8EAhB,GAAA,IAAAyD,EAAAtD,KACAH,EAAAC,OACAE,KAAAtB,SAAA,EACAsB,KAAA2B,KAAAN,IAAAS,EAAA,EAAAyB,YAAA1D,GAAA+C,KAAA,SAAAvF,GACAiG,EAAA5E,SAAA,EADA,IAEA8E,EAAAnG,EAAAmG,QAAAhF,EAAAnB,EAAAmB,cACA8E,EAAA/E,UACAC,cAAAiF,SAAAjF,GACAC,YAAAoB,EAAAC,KAAA,GAEAwD,EAAAhF,UAAAkF,MAIAE,QAlMA,WAmMA1D,KAAAa,QAAAb,KAAAH,SAEA8D,QArMA,WAsMA3D,KAAAH,OAAAiB,KAAAd,KAAAkC,MAAA3D,SAAAqF,UAAA,KCzQeC,GADEC,OAFjB,WAA0B,IAAAC,EAAA/D,KAAagE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,SAAmBF,EAAA,OAAYE,YAAA,cAAwBF,EAAA,OAAYE,YAAA,cAAwBF,EAAA,kBAAuBE,YAAA,mBAAAC,OAAsCvD,KAAA,QAAA/B,KAAA,YAAAuF,gBAAA,GAAAC,kBAAA,KAAAC,oBAAA,OAAAC,kBAAA,OAAAC,iBAAAX,EAAAxG,eAAAoH,eAAA,aAA+LC,IAAKC,OAAAd,EAAAzD,YAAwBwE,OAAQtF,MAAAuE,EAAA,KAAAtE,SAAA,SAAAsF,GAA0ChB,EAAAzG,KAAAyH,GAAaC,WAAA,WAAoB,GAAAjB,EAAAkB,GAAA,KAAAf,EAAA,OAA4BE,YAAA,gBAA0BF,EAAA,aAAkBG,OAAOtF,KAAA,UAAA+B,KAAA,SAAgC8D,IAAKM,MAAAnB,EAAA/B,YAAsB+B,EAAAkB,GAAA,cAAAlB,EAAAkB,GAAA,KAAAf,EAAA,YAAkDiB,aAAaC,KAAA,UAAAC,QAAA,YAAA7F,MAAAuE,EAAA,QAAAiB,WAAA,YAA4EX,OAAShH,KAAA0G,EAAAzF,UAAAgH,qBAA0CC,WAAA,WAAqBC,uBAAA,QAAAC,OAAA,GAAAC,OAAA,MAAyDxB,EAAA,mBAAwBG,OAAOtF,KAAA,QAAA4G,MAAA,KAAAC,MAAA,YAA8C7B,EAAAkB,GAAA,KAAAf,EAAA,mBAAoCG,OAAOwB,KAAA,WAAAC,MAAA,MAAAF,MAAA,YAAkD7B,EAAAkB,GAAA,KAAAf,EAAA,mBAAoCG,OAAOwB,KAAA,eAAAC,MAAA,OAAAF,MAAA,YAAuD7B,EAAAkB,GAAA,KAAAf,EAAA,mBAAoCG,OAAOwB,KAAA,OAAAC,MAAA,KAAAF,MAAA,UAA4CG,YAAAhC,EAAAiC,KAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAAjC,EAAA,QAAAH,EAAAkB,GAAAlB,EAAAqC,GAAA,kBAAAD,EAAAE,IAAAtH,KAAA,mBAAAoH,EAAAE,IAAAtH,KAAA,uBAAyHgF,EAAAkB,GAAA,KAAAf,EAAA,mBAAoCG,OAAOwB,KAAA,QAAAC,MAAA,KAAAF,MAAA,YAA8C7B,EAAAkB,GAAA,KAAAf,EAAA,mBAAoCG,OAAOwB,KAAA,cAAAC,MAAA,MAAAF,MAAA,YAAqD7B,EAAAkB,GAAA,KAAAf,EAAA,mBAAoCG,OAAOwB,KAAA,cAAAC,MAAA,OAAAF,MAAA,UAAqDG,YAAAhC,EAAAiC,KAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAAjC,EAAA,QAAAH,EAAAkB,GAAAlB,EAAAqC,GAAArC,EAAAuC,GAAA,WAAAvC,CAAAoC,EAAAE,IAAAE,YAAA,kCAA0GxC,EAAAkB,GAAA,KAAAf,EAAA,mBAAoCG,OAAOyB,MAAA,KAAAF,MAAA,UAA8BG,YAAAhC,EAAAiC,KAAsBC,IAAA,UAAAC,GAAA,SAAAM,GAAiC,OAAAtC,EAAA,aAAwBG,OAAOtF,KAAA,OAAA+B,KAAA,SAA6B8D,IAAKM,MAAA,SAAAuB,GAAyB1C,EAAA/C,cAAAwF,EAAAH,IAAApF,QAAkC8C,EAAAkB,GAAA,gBAAsB,GAAAlB,EAAAkB,GAAA,KAAAf,EAAA,cAAmCwC,IAAA,WAAArC,OAAsBsC,MAAA5C,EAAAxF,SAAAC,cAAAsB,KAAAiE,EAAAxF,SAAAE,aAAmEmG,IAAKgC,cAAA,SAAAH,GAA+B1C,EAAA8C,KAAA9C,EAAAxF,SAAA,cAAAkI,IAA8CrG,WAAA2D,EAAA3D,cAA8B2D,EAAAkB,GAAA,KAAAf,EAAA,aAA8BiB,aAAaC,KAAA,UAAAC,QAAA,YAAA7F,MAAAuE,EAAA,YAAAiB,WAAA,gBAAoFX,OAASyC,MAAA,KAAAhJ,KAAA,OAAAiJ,QAAAhD,EAAApF,UAAAgH,MAAA,QAAAqB,wBAAA,GAAgGpC,IAAKqC,iBAAA,SAAAR,GAAkC1C,EAAApF,UAAA8H,MAAuBvC,EAAA,WAAgBwC,IAAA,UAAArC,OAAqBS,MAAAf,EAAAnF,QAAAsI,iBAAA,GAAAhI,MAAA6E,EAAA7E,MAAAiI,eAAA,IAAAC,cAAA,SAAkGlD,EAAA,gBAAqBG,OAAOyB,MAAA,KAAAD,KAAA,cAAgC3B,EAAA,aAAkBG,OAAOgD,YAAA,QAAqBvC,OAAQtF,MAAAuE,EAAAnF,QAAA,SAAAa,SAAA,SAAAsF,GAAsDhB,EAAA8C,KAAA9C,EAAAnF,QAAA,WAAAmG,IAAuCC,WAAA,sBAAgCd,EAAA,aAAkBG,OAAOyB,MAAA,MAAAtG,MAAA,OAA2BuE,EAAAkB,GAAA,KAAAlB,EAAAuD,GAAAvD,EAAA,qBAAAwD,GAAsD,OAAArD,EAAA,aAAuB+B,IAAAsB,EAAAtG,GAAAoD,OAAmB7E,MAAA+H,EAAAtG,GAAA6E,MAAAyB,EAAAnC,WAAqC,OAAArB,EAAAkB,GAAA,KAAAf,EAAA,gBAAyCG,OAAOyB,MAAA,KAAAD,KAAA,YAA8B3B,EAAA,mBAAwBsD,aAAa7B,MAAA,SAAgBtB,OAAQoD,oBAAA,SAA4B3C,OAAQtF,MAAAuE,EAAAnF,QAAA,OAAAa,SAAA,SAAAsF,GAAoDhB,EAAA8C,KAAA9C,EAAAnF,QAAA,SAAAmG,IAAqCC,WAAA,qBAA8B,GAAAjB,EAAAkB,GAAA,KAAAf,EAAA,gBAAqCG,OAAOyB,MAAA,KAAAD,KAAA,UAA4B3B,EAAA,aAAkBG,OAAOgD,YAAA,UAAuBvC,OAAQtF,MAAAuE,EAAAnF,QAAA,KAAAa,SAAA,SAAAsF,GAAkDhB,EAAA8C,KAAA9C,EAAAnF,QAAA,OAAAmG,IAAmCC,WAAA,kBAA4Bd,EAAA,aAAkBG,OAAOyB,MAAA,MAAAtG,MAAA,mBAAuCuE,EAAAkB,GAAA,KAAAf,EAAA,aAA8BG,OAAOyB,MAAA,MAAAtG,MAAA,cAAkCuE,EAAAkB,GAAA,KAAAf,EAAA,aAA8BG,OAAOyB,MAAA,MAAAtG,MAAA,cAAiC,WAAAuE,EAAAkB,GAAA,KAAAf,EAAA,QAAqCE,YAAA,gBAAAC,OAAmCqD,KAAA,UAAgBA,KAAA,WAAexD,EAAA,aAAkBU,IAAIM,MAAAnB,EAAAhB,aAAuBgB,EAAAkB,GAAA,QAAAlB,EAAAkB,GAAA,KAAAf,EAAA,aAA6CG,OAAOtF,KAAA,WAAiB6F,IAAKM,MAAAnB,EAAA3B,QAAkB2B,EAAAkB,GAAA,sBAE1qI0C,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE1K,EACAyG,GATF,EAVA,SAAAkE,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/8.00b484b9bc781b09a559.js","sourcesContent":["<template>\r\n  <div class=\"page\">\r\n    <div class=\"tools-bar\">\r\n      <div class=\"left-wrap\">\r\n        <el-date-picker v-model=\"date\" class='date-picker-wrap' size=\"small\" type=\"daterange\" unlink-panels range-separator=\"至 \" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\" :picker-options=\"pickerOptions2\" @change=\"dateChange\" value-format=\"timestamp\">\r\n        </el-date-picker>\r\n      </div>\r\n      <div class=\"button-wrap\">\r\n        <el-button type=\"primary\" size=\"small\" @click=\"openCard\">开卡</el-button>\r\n      </div>\r\n    </div>\r\n    <el-table :data=\"tableData\" :header-cell-style=\"{background:'#F5F7FA'}\" v-loading=\"loading\" element-loading-text=\"拼命加载中\" border stripe>\r\n      <el-table-column type=\"index\" width=\"50\" align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"username\" label=\"开卡人\" align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"provinceName\" label=\"开卡省份\" align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"type\" label=\"类型\" align=\"center\">\r\n        <template slot-scope=\"props\">\r\n          <span>{{props.row.type==='FULL_FEATURED'?'全功能':props.row.type==='ZHI_YUAN'?'志愿卡':'选科卡'}}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"count\" label=\"数量\" align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"activeCount\" label=\"激活数\" align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"createdDate\" label=\"开卡时间\" align=\"center\">\r\n        <template slot-scope=\"props\">\r\n          <span>{{props.row.createdDate | dateTime('yyyy-MM-dd hh:mm:ss')}}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button @click=\"handlerExprot(scope.row.id)\" type=\"text\" size=\"small\">导出</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- <page ref=\"pageInfo\" :pageInfo=\"pageInfo\" @sizeChange=\"sizeChange\" @currentChange=\"currentChange\"></page> -->\r\n    <pagination ref=\"pageInfo\" :total=\"pageInfo.totalElements\" :page.sync=\"pageInfo.currentPage\" @pagination=\"pagination\"></pagination>\r\n    <el-dialog title=\"开卡\" v-loading=\"cardLoading\" text=\"正在生成\" :visible.sync=\"addDialog\" width=\"500px\" :close-on-click-modal=\"false\">\r\n      <el-form :model=\"addForm\" inline-message ref=\"addForm\" :rules=\"rules\" label-suffix=\":\" label-width=\"100\">\r\n        <el-form-item label=\"省份\" prop=\"province\">\r\n          <el-select v-model=\"addForm.province\" placeholder=\"选择省份\">\r\n            <el-option label=\"请选择\" value=\"0\"></el-option>\r\n            <el-option v-for=\"item in provinceArr\" :key=\"item.id\" :value=\"item.id\" :label=\"item.name\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"数量\" prop=\"number\">\r\n          <el-input-number v-model=\"addForm.number\" style=\"width:217px;\" controls-position=\"right\"></el-input-number>\r\n        </el-form-item>\r\n        <el-form-item label=\"类型\" prop=\"type\">\r\n          <el-select v-model=\"addForm.type\" placeholder=\"选择开卡类型\">\r\n            <el-option label=\"全功能\" value=\"FULL_FEATURED\"></el-option>\r\n            <el-option label=\"志愿卡\" value=\"ZHI_YUAN\"></el-option>\r\n            <el-option label=\"选科卡\" value=\"XUAN_KE\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"resetForm\">重置</el-button>\r\n        <el-button type=\"primary\" @click=\"save\">生成卡</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { api } from '@/utils'\r\nimport Cookies from 'js-cookie'\r\nimport { listHandle, pagination } from '@/components'\r\nexport default {\r\n  data () {\r\n    return {\r\n      date: null,\r\n      pickerOptions2: {\r\n        disabledDate (time) {\r\n          return time.getTime() > Date.now()\r\n        },\r\n        shortcuts: [{\r\n          text: '今天',\r\n          onClick (picker) {\r\n            picker.$emit('pick', [new Date(), new Date()])\r\n          }\r\n        }, {\r\n          text: '最近一周',\r\n          onClick (picker) {\r\n            const end = new Date()\r\n            const start = new Date()\r\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 7)\r\n            picker.$emit('pick', [start, end])\r\n          }\r\n        }, {\r\n          text: '最近一个月',\r\n          onClick (picker) {\r\n            const end = new Date()\r\n            const start = new Date()\r\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 30)\r\n            picker.$emit('pick', [start, end])\r\n          }\r\n        }, {\r\n          text: '最近三个月',\r\n          onClick (picker) {\r\n            const end = new Date()\r\n            const start = new Date()\r\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 90)\r\n            picker.$emit('pick', [start, end])\r\n          }\r\n        }]\r\n      },\r\n      searchName: '',\r\n      tableData: [],\r\n      pageInfo: {\r\n        totalElements: 0,\r\n        currentPage: 1\r\n      },\r\n      loading: false,\r\n      addDialog: false,\r\n      addForm: {\r\n        province: '',\r\n        number: 1,\r\n        type: 'FULL_FEATURED'\r\n      },\r\n      cardLoading: false,\r\n      provinceArr: [],\r\n      rules: {\r\n        province: [{\r\n          required: true,\r\n          message: '省份不能为空',\r\n          trigger: 'change'\r\n        }, {\r\n          validator: function (rule, value, callback) {\r\n            if (value === '0') {\r\n              return callback(new Error('请选择省份'))\r\n            } else {\r\n              callback()\r\n            }\r\n          },\r\n          trigger: 'change'\r\n        }],\r\n        number: [\r\n          { type: 'number', required: true, message: '数量不能为空', trigger: 'blur' },\r\n          {\r\n            validator: function (rule, value, callback) {\r\n              if (!/^[1-9]\\d*$/.test(value)) {\r\n                return callback(new Error('数量必须是大于0的正整数'))\r\n              } else {\r\n                callback()\r\n              }\r\n            },\r\n            trigger: 'blur'\r\n          }\r\n        ],\r\n        type: [\r\n          { required: true, message: '类型不能为空', trigger: 'change' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    params () {\r\n      return {\r\n        page: 1,\r\n        // size: 10,\r\n        beginDate: this.date ? this.date[0] : null,\r\n        endDate: this.date ? this.date[1] : null\r\n      }\r\n    }\r\n  },\r\n  components: {\r\n    listHandle,\r\n    pagination\r\n  },\r\n  methods: {\r\n    dateChange (e) {\r\n      let beginTime = new Date(e[0])\r\n      let endTime = new Date(e[1])\r\n      e[0] = new Date(beginTime.getFullYear() + '-' + (beginTime.getMonth() + 1) + '-' + beginTime.getDate() + ' 00:00:00').getTime()\r\n      e[1] = new Date(endTime.getFullYear() + '-' + (endTime.getMonth() + 1) + '-' + endTime.getDate() + ' 23:59:59').getTime()\r\n      this.params.beginDate = e[0]\r\n      this.params.endDate = e[1]\r\n      this.getData(this.params)\r\n    },\r\n    // 分页\r\n    pagination (e) {\r\n      this.params.page = e.page\r\n      this.params.size = e.limit\r\n      this.getData(this.params)\r\n    },\r\n    // 导出excel\r\n    handlerExprot (id) {\r\n      let { token } = Cookies.get('user') ? JSON.parse(Cookies.get('user')) : ''\r\n      window.location.href = this.$fly.config.baseURL + api.exportByRecordId + '/' + id + '?token=' + token\r\n    },\r\n    // 开卡\r\n    openCard () {\r\n      this.addDialog = true\r\n      this.getProvinces()\r\n      if (this.$refs['addForm']) {\r\n        this.$refs['addForm'].resetFields()\r\n      }\r\n    },\r\n    // 生成志愿卡\r\n    save () {\r\n      let params = {\r\n        count: this.addForm.number,\r\n        provinceId: this.addForm.province,\r\n        type: this.addForm.type\r\n      }\r\n      this.$refs['addForm'].validate((valid) => {\r\n        if (valid) {\r\n          this.cardLoading = true\r\n          this.$fly.post(api.generate, params).then(data => {\r\n            this.cardLoading = false\r\n            this.$message({\r\n              message: '生成成功!',\r\n              type: 'success'\r\n            })\r\n            this.getData(this.params)\r\n            this.addDialog = false\r\n          }).catch(() => {\r\n            this.$message({\r\n              message: '生成失败',\r\n              type: 'error'\r\n            })\r\n          })\r\n        }\r\n      })\r\n    },\r\n    // 重置表单\r\n    resetForm () {\r\n      this.$refs['addForm'].resetFields()\r\n    },\r\n    // 获取省份\r\n    getProvinces () {\r\n      this.$fly.get(api.getProvinces).then(data => {\r\n        // const { provinces } = data._embedded\r\n        // this.provinceArr = provinces\r\n        if (data.status === 100000) {\r\n          const provinces = data.data\r\n          this.provinceArr = provinces\r\n        } else {\r\n          this.$message({\r\n            message: '请求失败',\r\n            type: 'error'\r\n          })\r\n        }\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n    },\r\n    getData (params) {\r\n      params.page--\r\n      this.loading = true\r\n      this.$fly.get(api.byCondition, params).then(data => {\r\n        this.loading = false\r\n        let { content, totalElements } = data\r\n        this.pageInfo = {\r\n          totalElements: parseInt(totalElements),\r\n          currentPage: params.page + 1\r\n        }\r\n        this.tableData = content\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    this.getData(this.params)\r\n  },\r\n  mounted () {\r\n    this.params.size = this.$refs.pageInfo.pageSizes[0]\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.tools-bar .left-wrap .ceil-box {\r\n  width: auto;\r\n}\r\n.el-input-number .el-input__inner {\r\n  text-align: left;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/volunteer/card.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\"},[_c('div',{staticClass:\"tools-bar\"},[_c('div',{staticClass:\"left-wrap\"},[_c('el-date-picker',{staticClass:\"date-picker-wrap\",attrs:{\"size\":\"small\",\"type\":\"daterange\",\"unlink-panels\":\"\",\"range-separator\":\"至 \",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"picker-options\":_vm.pickerOptions2,\"value-format\":\"timestamp\"},on:{\"change\":_vm.dateChange},model:{value:(_vm.date),callback:function ($$v) {_vm.date=$$v},expression:\"date\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"button-wrap\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.openCard}},[_vm._v(\"开卡\")])],1)]),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"data\":_vm.tableData,\"header-cell-style\":{background:'#F5F7FA'},\"element-loading-text\":\"拼命加载中\",\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"50\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"开卡人\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"provinceName\",\"label\":\"开卡省份\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"type\",\"label\":\"类型\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('span',[_vm._v(_vm._s(props.row.type==='FULL_FEATURED'?'全功能':props.row.type==='ZHI_YUAN'?'志愿卡':'选科卡'))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"count\",\"label\":\"数量\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"activeCount\",\"label\":\"激活数\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"createdDate\",\"label\":\"开卡时间\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('span',[_vm._v(_vm._s(_vm._f(\"dateTime\")(props.row.createdDate,'yyyy-MM-dd hh:mm:ss')))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.handlerExprot(scope.row.id)}}},[_vm._v(\"导出\")])]}}])})],1),_vm._v(\" \"),_c('pagination',{ref:\"pageInfo\",attrs:{\"total\":_vm.pageInfo.totalElements,\"page\":_vm.pageInfo.currentPage},on:{\"update:page\":function($event){_vm.$set(_vm.pageInfo, \"currentPage\", $event)},\"pagination\":_vm.pagination}}),_vm._v(\" \"),_c('el-dialog',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.cardLoading),expression:\"cardLoading\"}],attrs:{\"title\":\"开卡\",\"text\":\"正在生成\",\"visible\":_vm.addDialog,\"width\":\"500px\",\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.addDialog=$event}}},[_c('el-form',{ref:\"addForm\",attrs:{\"model\":_vm.addForm,\"inline-message\":\"\",\"rules\":_vm.rules,\"label-suffix\":\":\",\"label-width\":\"100\"}},[_c('el-form-item',{attrs:{\"label\":\"省份\",\"prop\":\"province\"}},[_c('el-select',{attrs:{\"placeholder\":\"选择省份\"},model:{value:(_vm.addForm.province),callback:function ($$v) {_vm.$set(_vm.addForm, \"province\", $$v)},expression:\"addForm.province\"}},[_c('el-option',{attrs:{\"label\":\"请选择\",\"value\":\"0\"}}),_vm._v(\" \"),_vm._l((_vm.provinceArr),function(item){return _c('el-option',{key:item.id,attrs:{\"value\":item.id,\"label\":item.name}})})],2)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"数量\",\"prop\":\"number\"}},[_c('el-input-number',{staticStyle:{\"width\":\"217px\"},attrs:{\"controls-position\":\"right\"},model:{value:(_vm.addForm.number),callback:function ($$v) {_vm.$set(_vm.addForm, \"number\", $$v)},expression:\"addForm.number\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"类型\",\"prop\":\"type\"}},[_c('el-select',{attrs:{\"placeholder\":\"选择开卡类型\"},model:{value:(_vm.addForm.type),callback:function ($$v) {_vm.$set(_vm.addForm, \"type\", $$v)},expression:\"addForm.type\"}},[_c('el-option',{attrs:{\"label\":\"全功能\",\"value\":\"FULL_FEATURED\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"志愿卡\",\"value\":\"ZHI_YUAN\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"选科卡\",\"value\":\"XUAN_KE\"}})],1)],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.resetForm}},[_vm._v(\"重置\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"生成卡\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-51ad60c6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/volunteer/card.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-51ad60c6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!sass-resources-loader?{\\\"resources\\\":\\\"D:\\\\\\\\work\\\\\\\\junyang_admin\\\\\\\\src\\\\\\\\assets\\\\\\\\sass\\\\\\\\var.scss\\\"}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./card.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./card.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./card.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-51ad60c6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./card.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/volunteer/card.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}