{"version":3,"sources":["webpack:///src/pages/system/appAutoUpgrade.vue","webpack:///./src/pages/system/appAutoUpgrade.vue?9c6a","webpack:///./src/pages/system/appAutoUpgrade.vue"],"names":["appAutoUpgrade","data","params","page","checkData","pageInfo","totalElements","currentPage","tableData","loading","components","listHandle","pagination","methods","onPublish","row","_this","this","txt","isPublish","$fly","post","utils","appChangeStatus","id","then","status","$message","message","type","getData","catch","refresh","handleSelectionChange","e","_this2","lodash","map","item","push","size","limit","_this3","get","appList","setTimeout","_data$data","content","parseInt","created","mounted","$refs","pageSizes","system_appAutoUpgrade","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","showSoldout","showDelete","on","_v","directives","name","rawName","value","expression","ref","header-cell-class-name","element-loading-text","border","stripe","selection-change","width","align","label","scopedSlots","_u","key","fn","scope","product","_s","undefined","prop","min-width","createUser","username","_f","createTime","click","$event","total","update:page","$set","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/4.3347d6bb837e47e8cee5.js","sourcesContent":["<template>\r\n  <div class=\"page\">\r\n    <div class=\"tools-bar\">\r\n      <listHandle :showSoldout=\"false\" :showDelete=\"false\" :checkData=\"checkData\" @refresh=\"refresh\"></listHandle>\r\n    </div>\r\n    <el-table ref=\"multipleTable\" header-cell-class-name=\"tableHeader\" :data=\"tableData\" v-loading=\"loading\" element-loading-text=\"拼命加载中\" border stripe @selection-change=\"handleSelectionChange\">\r\n      <el-table-column type=\"index\" width=\"50\" align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column label=\"产品\" align=\"center\" width=\"100\">\r\n        <template slot-scope=\"scope\" v-if=\"scope.row.product\">{{ scope.row.product.name }}</template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"platform\" label=\"平台\" align=\"center\" width=\"100\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"version\" label=\"版本号\" align=\"center\" width=\"120\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"isProduction\" label=\"环境\" align=\"center\" width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <span v-if=\"scope.row.isProduction\">正式环境</span>\r\n          <span v-else>其他环境</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"状态\" width=\"90\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag size=\"small\" :type=\"scope.row.isPublish?'success':'warning'\">\r\n            <span v-if=\"scope.row.isPublish\">已发布</span>\r\n            <span v-else>未发布</span>\r\n          </el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"ossUrl\" label=\"下载地址\" align=\"center\" min-width=\"100\">\r\n      </el-table-column>\r\n      <el-table-column label=\"创建人\" align=\"center\" width=\"120\">\r\n        <template slot-scope=\"scope\">{{ scope.row.createUser.username }}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"创建时间\" width=\"180\" align=\"center\">\r\n        <template slot-scope=\"scope\">{{ scope.row.createTime | dateTime('yyyy-MM-dd hh:mm:ss') }}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"80\" align=\"center\">\r\n        <template slot-scope=\"scope \">\r\n          <el-button type=\"text \" size=\"mini\" @click=\"onPublish(scope.row)\">\r\n            <span v-if=\"scope.row.isPublish\">下架</span>\r\n            <span v-else>发布</span>\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <pagination ref=\"pageInfo\" :total=\"pageInfo.totalElements\" :page.sync=\"pageInfo.currentPage\" @pagination=\"pagination\"></pagination>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { api } from '@/utils'\r\nimport { listHandle, pagination } from '@/components'\r\nexport default {\r\n  data () {\r\n    return {\r\n      params: {\r\n        page: 1\r\n      },\r\n      checkData: [],\r\n      pageInfo: {\r\n        totalElements: 0,\r\n        currentPage: 1\r\n      },\r\n      tableData: [],\r\n      loading: false\r\n    }\r\n  },\r\n  components: {\r\n    listHandle,\r\n    pagination\r\n  },\r\n  methods: {\r\n    onPublish (row) {\r\n      let txt = row.isPublish ? '下架' : '发布'\r\n      this.$fly.post(api.appChangeStatus, { id: row.id }).then((data) => {\r\n        if (data.status === 100000) {\r\n          this.$message({\r\n            message: `${txt}成功`,\r\n            type: 'success'\r\n          })\r\n          this.params.page = 1\r\n          this.getData(this.params)\r\n        } else {\r\n          this.$message({\r\n            message: `${txt}失败`,\r\n            type: 'error'\r\n          })\r\n        }\r\n      }).catch(() => {\r\n        this.$message({\r\n          message: '请求失败',\r\n          type: 'error'\r\n        })\r\n      })\r\n    },\r\n    refresh () {\r\n      this.params.page = 1\r\n      this.getData(this.params)\r\n    },\r\n    handleSelectionChange (e) {\r\n      this.checkData = []\r\n      this.lodash.map(e, (item) => {\r\n        this.checkData.push({ id: item.id, status: item.status })\r\n      })\r\n    },\r\n    // 分页\r\n    pagination (e) {\r\n      this.params.page = e.page\r\n      this.params.size = e.limit\r\n      this.getData(this.params)\r\n    },\r\n    // 获取数据\r\n    getData (params) {\r\n      params.page--\r\n      this.loading = true\r\n      this.$fly.get(api.appList, params).then(data => {\r\n        setTimeout(() => {\r\n          this.loading = false\r\n        }, 1000)\r\n        if (data.status === 100000) {\r\n          let { content, totalElements } = data.data\r\n          this.tableData = content\r\n          this.pageInfo = {\r\n            totalElements: parseInt(totalElements),\r\n            currentPage: params.page + 1\r\n          }\r\n        } else {\r\n          this.$message({\r\n            message: '请求失败',\r\n            type: 'error'\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    this.getData(this.params)\r\n  },\r\n  mounted () {\r\n    this.params.size = this.$refs.pageInfo.pageSizes[0]\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.tools-bar {\r\n  justify-content: flex-end;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/system/appAutoUpgrade.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\"},[_c('div',{staticClass:\"tools-bar\"},[_c('listHandle',{attrs:{\"showSoldout\":false,\"showDelete\":false,\"checkData\":_vm.checkData},on:{\"refresh\":_vm.refresh}})],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"multipleTable\",attrs:{\"header-cell-class-name\":\"tableHeader\",\"data\":_vm.tableData,\"element-loading-text\":\"拼命加载中\",\"border\":\"\",\"stripe\":\"\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"50\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"产品\",\"align\":\"center\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return scope.row.product?[_vm._v(_vm._s(scope.row.product.name))]:undefined}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"platform\",\"label\":\"平台\",\"align\":\"center\",\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"version\",\"label\":\"版本号\",\"align\":\"center\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"isProduction\",\"label\":\"环境\",\"align\":\"center\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.isProduction)?_c('span',[_vm._v(\"正式环境\")]):_c('span',[_vm._v(\"其他环境\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"状态\",\"width\":\"90\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"size\":\"small\",\"type\":scope.row.isPublish?'success':'warning'}},[(scope.row.isPublish)?_c('span',[_vm._v(\"已发布\")]):_c('span',[_vm._v(\"未发布\")])])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"ossUrl\",\"label\":\"下载地址\",\"align\":\"center\",\"min-width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"创建人\",\"align\":\"center\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.createUser.username))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"创建时间\",\"width\":\"180\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm._f(\"dateTime\")(scope.row.createTime,'yyyy-MM-dd hh:mm:ss')))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"80\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope ){return [_c('el-button',{attrs:{\"type\":\"text \",\"size\":\"mini\"},on:{\"click\":function($event){_vm.onPublish(scope.row)}}},[(scope.row.isPublish)?_c('span',[_vm._v(\"下架\")]):_c('span',[_vm._v(\"发布\")])])]}}])})],1),_vm._v(\" \"),_c('pagination',{ref:\"pageInfo\",attrs:{\"total\":_vm.pageInfo.totalElements,\"page\":_vm.pageInfo.currentPage},on:{\"update:page\":function($event){_vm.$set(_vm.pageInfo, \"currentPage\", $event)},\"pagination\":_vm.pagination}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a089ba2c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/system/appAutoUpgrade.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a089ba2c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!sass-resources-loader?{\\\"resources\\\":\\\"D:\\\\\\\\work\\\\\\\\junyang_admin\\\\\\\\src\\\\\\\\assets\\\\\\\\sass\\\\\\\\var.scss\\\"}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./appAutoUpgrade.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./appAutoUpgrade.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./appAutoUpgrade.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a089ba2c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./appAutoUpgrade.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-a089ba2c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/system/appAutoUpgrade.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}