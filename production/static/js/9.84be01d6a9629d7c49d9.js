webpackJsonp([9],{"gN/b":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("0xDb"),s=a("bGai"),o={data:function(){return{pickerVal:[],params:{title:null,page:1,sortType:1},checkData:[],pageInfo:{totalElements:0,currentPage:1},tableData:[],loading:!1,visible:!1,loading2:!1,commentParams:{themeInfoId:"",page:1},commentTableData:[],commentPageInfo:{totalElements:0,currentPage:1}}},components:{picker:s.e,listHandle:s.c,pagination:s.d,drawer:s.b},methods:{lookComment:function(t){this.visible=!0,this.commentParams={page:1,themeInfoId:t.id,size:this.$refs.commentPageInfo.pageSizes[0]},this.getCommentData(this.commentParams)},close:function(){this.closeAnimate=!0,this.popoverIsClose=!0,this.startAnimate=!1},handleSelectionChange:function(t){var e=this;this.checkData=[],this.lodash.map(t,function(t){e.checkData.push({id:t.id,status:t.status})})},pagination:function(t){this.params.page=t.page,this.params.size=t.limit,this.getData(this.params)},reset:function(){this.params={title:null,page:1,size:this.$refs.pageInfo.size,sortType:1},this.pickerVal=[],this.getData(this.params)},search:function(){this.getData(this.params)},refresh:function(){this.getData(this.params)},getData:function(t){var e=this;t.productId=this.pickerVal[0],t.page--,this.loading=!0,this.$fly.get(n.a.topicList,t).then(function(a){e.loading=!1,e.tableData=a.content,e.tableData.map(function(t){return t.visible=!1,t}),e.pageInfo={totalElements:a.totalElements,currentPage:t.page+1}})},commentPagination:function(t){this.commentParams.page=t.page,this.commentParams.size=t.limit,this.getCommentData(this.commentParams)},handleDelete:function(t){var e=this;Object(n.b)("您确定将删除该评论吗？","提示").then(function(){e.popoverIsClose=!0,e.closeAnimate=!1,e.startAnimate=!1,e.$fly.get(n.a.deleteCommentByCommentId,{themeInfoId:e.commentParams.themeInfoId,commentId:t.commentId}).then(function(t){console.log(t),e.getCommentData(e.commentParams),e.$message({message:"删除成功",duration:2e3,type:"success"})})}).catch(function(t){e.popoverIsClose=!0,e.closeAnimate=!1,e.startAnimate=!1})},commentCurrentChange:function(t){this.popoverIsClose=!0,this.closeAnimate=!1,this.startAnimate=!1,this.commentParams.page=t,this.getCommentData(this.commentParams)},commentSizeChange:function(t){this.commentParams.page=1,this.commentParams.size=t,this.getCommentData(this.commentParams)},getCommentData:function(t){var e=this;t.page--,this.loading2=!0,this.$fly.get(n.a.queryCommentByThemeInfoId,t).then(function(a){e.loading2=!1,e.commentTableData=a.content,e.commentPageInfo={totalElements:parseInt(a.totalElements),currentPage:t.page+1}})},handleBodyClick:function(t){this.visible=t}},created:function(){this.getData(this.params)},mounted:function(){this.params.size=this.$refs.pageInfo.pageSizes[0]}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{staticClass:"tools-bar"},[a("div",{staticClass:"left-wrap"},[a("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索关键字",size:"small"},model:{value:t.params.title,callback:function(e){t.$set(t.params,"title",e)},expression:"params.title"}}),t._v(" "),a("picker",{attrs:{size:"small",span:-1},model:{value:t.pickerVal,callback:function(e){t.pickerVal=e},expression:"pickerVal"}}),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.search}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:t.reset}},[t._v("重置")])],1),t._v(" "),a("listHandle",{attrs:{checkData:t.checkData,"show-hot":""},on:{refresh:t.refresh}})],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",attrs:{"header-cell-class-name":"tableHeader",data:t.tableData,"element-loading-text":"拼命加载中",border:"",stripe:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center","label-class-name":"checkLabel"}}),t._v(" "),a("el-table-column",{attrs:{label:"标题",align:"center","min-width":"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"是否热门",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"small",type:1===e.row.isHot?"danger":"info"}},[t._v(t._s(e.row.isHot?"是":"否"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"所属产品",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.product.name))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"操作人","min-width":"260",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"small",type:t._f("publicStatus")(e.row.status,"style")}},[t._v(t._s(t._f("publicStatus")(e.row.status)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"totalReadNum",label:"阅读量",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.totalReadNum)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("dateTime")(e.row.createTime,"yyyy-MM-dd hh:mm:ss")))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"发布时间",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("dateTime")(e.row.publishTime,"yyyy-MM-dd hh:mm:ss")))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[2===e.row.status||3===e.row.status?a("el-button",{attrs:{type:"text ",size:"mini"}},[a("router-link",{attrs:{to:{name:"xuanke/topic",params:{type:"edit"},query:{id:e.row.id}},tag:"span"}},[t._v("编辑")])],1):t._e(),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){a.stopPropagation(),t.lookComment(e.row)}}},[t._v("查看评论")])]}}])})],1),t._v(" "),a("pagination",{ref:"pageInfo",attrs:{total:t.pageInfo.totalElements,page:t.pageInfo.currentPage},on:{"update:page":function(e){t.$set(t.pageInfo,"currentPage",e)},pagination:t.pagination}}),t._v(" "),a("drawer",{staticClass:"drawer-components",attrs:{title:"评论",width:"60",right:"140",placement:"right"},on:{bodyClick:t.handleBodyClick},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading2,expression:"loading2"}],attrs:{"header-cell-class-name":"tableHeader",data:t.commentTableData,"element-loading-text":"拼命加载中",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"useId",label:"评论人",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"内容",align:"center","min-width":"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.commentContent))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("dateTime")(e.row.commentTime,"yyyy-MM-dd hh:mm:ss")))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text ",size:"mini"},on:{click:function(a){a.stopPropagation(),t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("pagination",{ref:"commentPageInfo",attrs:{total:t.commentPageInfo.totalElements,page:t.commentPageInfo.currentPage},on:{"update:page":function(e){t.$set(t.commentPageInfo,"currentPage",e)},pagination:t.commentPagination}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(o,i,!1,function(t){a("jK9Z")},"data-v-4475f316",null);e.default=l.exports},jK9Z:function(t,e){}});
//# sourceMappingURL=9.84be01d6a9629d7c49d9.js.map